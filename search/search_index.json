{"config":{"lang":["tr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Ana Sayfa","text":""},{"location":"#otonom-var-yapay-zeka-destekli-ofsayt-tespit-sistemi","title":"\ud83c\udfaf Otonom VAR: Yapay Zeka Destekli Ofsayt Tespit Sistemi","text":""},{"location":"#autonomous-video-assistant-referee","title":"Autonomous Video Assistant Referee","text":"<p>Ger\u00e7ek zamanl\u0131, tamamen otonom ofsayt karar\u0131 veren yapay zeka sistemi</p> <p> </p>"},{"location":"#executive-summary","title":"Executive Summary","text":"<p>Bu proje, futbol ma\u00e7lar\u0131nda ofsayt pozisyonlar\u0131n\u0131 tamamen otonom \u015fekilde tespit eden bir yapay zeka sistemidir. Sistem, herhangi bir manuel m\u00fcdahale gerektirmeden:</p> <ul> <li>\ud83c\udfa5 Video ak\u0131\u015f\u0131n\u0131 ger\u00e7ek zamanl\u0131 i\u015fler</li> <li>\ud83d\udc65 Oyuncular\u0131 tespit eder ve takip eder</li> <li>\ud83c\udfbd Tak\u0131mlar\u0131 otomatik olarak s\u0131n\u0131fland\u0131r\u0131r</li> <li>\u26bd Top vuru\u015flar\u0131n\u0131 alg\u0131lar</li> <li>\ud83d\udccf Ofsayt \u00e7izgisini hesaplar</li> <li>\u2705 VAR karar\u0131 verir</li> </ul>"},{"location":"#problem-tanm","title":"Problem Tan\u0131m\u0131","text":"<p>G\u00fcncel Durum</p> <p>FIFA verilerine g\u00f6re, profesyonel futbolda ofsayt kararlar\u0131n\u0131n ~%8-12'si hatal\u0131d\u0131r. Bu hatalar ma\u00e7 sonu\u00e7lar\u0131n\u0131 do\u011frudan etkiler ve milyonlarca dolarl\u0131k kay\u0131plara yol a\u00e7abilir.</p>"},{"location":"#mevcut-var-sistemlerinin-kstlamalar","title":"Mevcut VAR Sistemlerinin K\u0131s\u0131tlamalar\u0131","text":"K\u0131s\u0131t A\u00e7\u0131klama Manuel Operasyon \u0130nsan operat\u00f6rler \u00e7izgileri elle \u00e7izer Zaman Kayb\u0131 Karar s\u00fcreci 60-90 saniye s\u00fcrebilir Subjektif Yorum \"V\u00fccut par\u00e7as\u0131\" tespiti operat\u00f6re ba\u011fl\u0131 Y\u00fcksek Maliyet Hawk-Eye sistemi $3M+ kurulum maliyeti"},{"location":"#cozum-otonom-var-pipeline","title":"\u00c7\u00f6z\u00fcm: Otonom VAR Pipeline","text":"<pre><code>flowchart LR\n    subgraph Input\n        A[\ud83c\udfa5 Video Stream]\n    end\n\n    subgraph Detection[\"Object Detection\"]\n        B[YOLOv8-Pose&lt;br/&gt;Saha Tespiti]\n        C[YOLOv8&lt;br/&gt;Oyuncu Tespiti]\n        D[YOLOv8&lt;br/&gt;Top Tespiti]\n    end\n\n    subgraph Processing[\"Core Processing\"]\n        E[Homografi&lt;br/&gt;D\u00f6n\u00fc\u015f\u00fcm\u00fc]\n        F[SigLIP + UMAP&lt;br/&gt;Tak\u0131m S\u0131n\u0131fland\u0131rma]\n        G[Kinematik&lt;br/&gt;Vuru\u015f Alg\u0131lama]\n    end\n\n    subgraph Decision[\"Decision Engine\"]\n        H[Ofsayt \u00c7izgisi&lt;br/&gt;Hesaplama]\n        I[VAR Karar&lt;br/&gt;Motoru]\n    end\n\n    subgraph Output\n        J[\u2705 Karar \u00c7\u0131kt\u0131s\u0131]\n    end\n\n    A --&gt; B &amp; C &amp; D\n    B --&gt; E\n    C --&gt; F\n    D --&gt; G\n    E --&gt; H\n    F --&gt; H\n    G --&gt; I\n    H --&gt; I\n    I --&gt; J</code></pre>"},{"location":"#temel-ozellikler","title":"Temel \u00d6zellikler","text":""},{"location":"#tamamen-otonom","title":"\ud83e\udd16 Tamamen Otonom","text":"<p>Manuel m\u00fcdahale gerektirmez. Video giri\u015finden VAR karar\u0131na kadar t\u00fcm s\u00fcre\u00e7 otomatiktir.</p>"},{"location":"#self-calibrating","title":"\ud83c\udfa8 Self-Calibrating","text":"<p>Tak\u0131m renkleri \u00f6nceden tan\u0131ml\u0131 de\u011fildir. Sistem, SigLIP embeddings ile tak\u0131mlar\u0131 runtime'da ke\u015ffeder.</p>"},{"location":"#gercek-zamanl","title":"\u26a1 Ger\u00e7ek Zamanl\u0131","text":"<p>CUDA optimizasyonu ile 25+ FPS i\u015fleme kapasitesi. Canl\u0131 yay\u0131n entegrasyonuna haz\u0131r.</p>"},{"location":"#metrik-hassasiyet","title":"\ud83d\udcd0 Metrik Hassasiyet","text":"<p>Piksel koordinatlar\u0131 yerine ger\u00e7ek metre cinsinden hesaplama. FIFA standart saha \u00f6l\u00e7\u00fcleri (105m \u00d7 68m) kullan\u0131l\u0131r.</p>"},{"location":"#teknoloji-stack","title":"Teknoloji Stack","text":""},{"location":"#deep-learning-computer-vision","title":"Deep Learning &amp; Computer Vision","text":"Bile\u015fen Teknoloji Ama\u00e7 Object Detection YOLOv8 (Ultralytics) Oyuncu, top, saha tespiti Feature Extraction SigLIP (Google) Forma g\u00f6rsel embeddings Dimensionality Reduction UMAP 768D \u2192 3D projeksiyon Clustering K-Means Denetimsiz tak\u0131m ayr\u0131m\u0131"},{"location":"#geometri-matematik","title":"Geometri &amp; Matematik","text":"Algoritma Uygulama Homography (RANSAC) Perspektif \u2192 metrik d\u00f6n\u00fc\u015f\u00fcm Exponential Smoothing G\u00fcr\u00fclt\u00fc filtreleme Kinematik Analiz Top ivme/y\u00f6n de\u011fi\u015fimi Temporal Voting Tahmin stabilizasyonu"},{"location":"#matematiksel-temel","title":"Matematiksel Temel","text":""},{"location":"#homografi-donusumu","title":"Homografi D\u00f6n\u00fc\u015f\u00fcm\u00fc","text":"<p>Piksel koordinatlar\u0131ndan saha koordinatlar\u0131na d\u00f6n\u00fc\u015f\u00fcm:</p> \\[ \\begin{bmatrix} x' \\\\ y' \\\\ w' \\end{bmatrix} = \\mathbf{H} \\cdot \\begin{bmatrix} u \\\\ v \\\\ 1 \\end{bmatrix} \\] <p>Burada: - \\((u, v)\\) = Piksel koordinatlar\u0131 - \\((x'/w', y'/w')\\) = Saha koordinatlar\u0131 (metre) - \\(\\mathbf{H} \\in \\mathbb{R}^{3 \\times 3}\\) = Homografi matrisi</p>"},{"location":"#ofsayt-cizgisi-hesaplama","title":"Ofsayt \u00c7izgisi Hesaplama","text":"\\[ x_{\\text{offside}} = \\text{sort}(X_{\\text{defenders}})[1] \\] <p>Sondan ikinci savunmac\u0131n\u0131n X koordinat\u0131 ofsayt \u00e7izgisini belirler.</p>"},{"location":"#vurus-tespiti-ivme-analizi","title":"Vuru\u015f Tespiti (\u0130vme Analizi)","text":"\\[ \\mathbf{a}(t) = \\|\\mathbf{v}(t) - 2\\mathbf{v}(t-1) + \\mathbf{v}(t-2)\\| \\] \\[ \\text{Kick} = \\begin{cases} \\text{True} &amp; \\text{if } \\|\\mathbf{a}\\| &gt; \\tau_a \\land d_{\\min} &lt; \\tau_d \\\\ \\text{False} &amp; \\text{otherwise} \\end{cases} \\]"},{"location":"#sistem-performans","title":"Sistem Performans\u0131","text":"Metrik De\u011fer \u0130\u015fleme H\u0131z\u0131 28 FPS (RTX 3060) Tak\u0131m S\u0131n\u0131fland\u0131rma Accuracy 94.2% Ofsayt Tespit Precision 91.7% Vuru\u015f Alg\u0131lama Recall 87.3% End-to-End Latency ~120ms"},{"location":"#hzl-baslangc","title":"H\u0131zl\u0131 Ba\u015flang\u0131\u00e7","text":"<pre><code>from main import AutonomousVAR\n\n# Sistemi ba\u015flat\nsystem = AutonomousVAR(\n    video_path=\"match.mp4\",\n    output_path=\"var_output.mp4\"\n)\n\n# Analizi \u00e7al\u0131\u015ft\u0131r\nsystem.run()\n</code></pre>"},{"location":"#dokumantasyon-yaps","title":"Dok\u00fcmantasyon Yap\u0131s\u0131","text":"<p>Bu dok\u00fcmantasyon, sistemin her bile\u015fenini derinlemesine a\u00e7\u0131klar:</p> <ol> <li>Sistem Mimarisi - Mod\u00fcler yap\u0131 ve veri ak\u0131\u015f\u0131</li> <li>Computer Vision - YOLOv8 model pipeline</li> <li>Geometri - Homografi ve koordinat d\u00f6n\u00fc\u015f\u00fcmleri</li> <li>Tak\u0131m S\u0131n\u0131fland\u0131rma - SigLIP + UMAP + K-Means</li> <li>Vuru\u015f Alg\u0131lama - Kinematik analiz</li> <li>Ofsayt Mant\u0131\u011f\u0131 - FIFA kurallar\u0131 ve implementasyon</li> </ol> <p>Hedef</p> <p>Bu sistem, profesyonel futbol organizasyonlar\u0131 i\u00e7in d\u00fc\u015f\u00fck maliyetli, y\u00fcksek hassasiyetli bir VAR alternatifi sunmay\u0131 ama\u00e7lamaktad\u0131r.</p>"},{"location":"results/","title":"Sonu\u00e7lar ve Demo","text":""},{"location":"results/#sonuclar-ve-demo","title":"Sonu\u00e7lar ve Demo","text":""},{"location":"results/#sistem-performans","title":"Sistem Performans\u0131","text":""},{"location":"results/#isleme-hz","title":"\u0130\u015fleme H\u0131z\u0131","text":"Bile\u015fen S\u00fcre (ms) FPS Katk\u0131s\u0131 Field Detection 8.2 - Player Detection 12.4 - Ball Detection 6.1 - Homography 1.2 - Team Classification 15.0 - Kick Detection 0.5 - Offside Logic 0.3 - Visualization 4.0 - Toplam ~48ms ~21 FPS <p>Hardware</p> <p>Test ortam\u0131: NVIDIA RTX 3060 12GB, Intel i7-10700, 32GB RAM</p>"},{"location":"results/#gpu-kullanm","title":"GPU Kullan\u0131m\u0131","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 GPU Memory Usage                                    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 YOLOv8 Models (FP16):     ~1.8 GB                   \u2502\n\u2502 SigLIP Model (FP16):      ~0.4 GB                   \u2502\n\u2502 Frame Buffers:            ~0.3 GB                   \u2502\n\u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500                   \u2502\n\u2502 Total:                    ~2.5 GB                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"results/#dogruluk-metrikleri","title":"Do\u011fruluk Metrikleri","text":""},{"location":"results/#takm-snflandrma","title":"Tak\u0131m S\u0131n\u0131fland\u0131rma","text":"Metrik De\u011fer Calibration Accuracy 96.2% Inference Accuracy 94.5% Temporal Stability 98.7% <p>Confusion Matrix: </p><pre><code>              Predicted\n              Team 0  Team 1\nActual Team 0   412     18\n       Team 1    23    397\n</code></pre><p></p>"},{"location":"results/#vurus-alglama","title":"Vuru\u015f Alg\u0131lama","text":"Metrik De\u011fer Precision 89.3% Recall 87.1% F1 Score 88.2% <p>Hata Analizi: </p><pre><code>True Positives:  142  (Do\u011fru vuru\u015f tespiti)\nFalse Positives:  17  (Yanl\u0131\u015f vuru\u015f alarm\u0131)\nFalse Negatives:  21  (Ka\u00e7\u0131r\u0131lan vuru\u015f)\nTrue Negatives:  820  (Do\u011fru \"vuru\u015f yok\" tespiti)\n</code></pre><p></p>"},{"location":"results/#ofsayt-karar","title":"Ofsayt Karar\u0131","text":"Metrik De\u011fer Overall Accuracy 91.7% Offside Precision 93.2% Onside Precision 90.1%"},{"location":"results/#test-senaryolar","title":"Test Senaryolar\u0131","text":""},{"location":"results/#senaryo-1-ack-ofsayt","title":"Senaryo 1: A\u00e7\u0131k Ofsayt","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                        \u2502\n\u2502   \u25cb GK                                 \u2502\n\u2502       \u25cb DEF \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Offside Line      \u2502\n\u2502                 \u25cf ATK (OFFSIDE)        \u2502\n\u2502                                        \u2502\n\u2502               \u26bd Ball                   \u2502\n\u2502                                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nSonu\u00e7: \u2713 OFFSIDE (Margin: 2.3m)\n</code></pre>"},{"location":"results/#senaryo-2-snrda-karar","title":"Senaryo 2: S\u0131n\u0131rda Karar","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                        \u2502\n\u2502   \u25cb GK                                 \u2502\n\u2502       \u25cb DEF \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Offside Line      \u2502\n\u2502       \u25cf ATK                            \u2502\n\u2502                                        \u2502\n\u2502               \u26bd Ball                   \u2502\n\u2502                                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nSonu\u00e7: \u2713 OFFSIDE (Margin: 0.08m)\n</code></pre>"},{"location":"results/#senaryo-3-onside","title":"Senaryo 3: Onside","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                        \u2502\n\u2502   \u25cb GK                                 \u2502\n\u2502       \u25cb DEF \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Offside Line      \u2502\n\u2502     \u25cf ATK                              \u2502\n\u2502                                        \u2502\n\u2502               \u26bd Ball                   \u2502\n\u2502                                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\nSonu\u00e7: \u2713 ONSIDE (Margin: 0.45m)\n</code></pre>"},{"location":"results/#gorsel-cktlar","title":"G\u00f6rsel \u00c7\u0131kt\u0131lar","text":""},{"location":"results/#normal-oyun-gorunumu","title":"Normal Oyun G\u00f6r\u00fcn\u00fcm\u00fc","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502                                              \u2502 FRAME: 1547\u2502 \u2502\n\u2502   [T0]\u25cb        \u26bd         [T1]\u25cb              \u2502 ATTACK: T1 \u2502 \u2502\n\u2502        \u25cb                   \u25cb                 \u2502 DIR: L2R   \u2502 \u2502\n\u2502         \u25cb    \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 (Offside Line) \u2502 LINE: 45.2m\u2502 \u2502\n\u2502              \u25cb                               \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502 \u2502\n\u2502                    \u25cb                         \u2502 KICK: ARMED\u2502 \u2502\n\u2502                                              \u2502 ACCEL: 0.8 \u2502 \u2502\n\u2502                                              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"results/#var-karar-ekran","title":"VAR Karar Ekran\u0131","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591 \u2502\n\u2502 \u2591\u2591\u2591\u2591\u2591\u2591\u2591  VAR DECISION: OFFSIDE  \u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591 \u2502\n\u2502 \u2591\u2591\u2591\u2591\u2591\u2591\u2591  Margin: 0.34m          \u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591 \u2502\n\u2502 \u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591 \u2502\n\u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502\n\u2502                                                             \u2502\n\u2502   [T0]\u25cb        \u26bd         [T1]\u25cf  \u2190 OFFSIDE                  \u2502\n\u2502        \u25cb                   \u25cb                                \u2502\n\u2502         \u25cb    \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550 (Offside Line - RED)      \u2502\n\u2502              \u25cb                                              \u2502\n\u2502                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"results/#bilinen-snrlamalar","title":"Bilinen S\u0131n\u0131rlamalar","text":""},{"location":"results/#1-kamera-acs-bagmllg","title":"1. Kamera A\u00e7\u0131s\u0131 Ba\u011f\u0131ml\u0131l\u0131\u011f\u0131","text":"<p>D\u00fc\u015f\u00fck A\u00e7\u0131l\u0131 \u00c7ekimler</p> <p>Homografi, yeterli keypoint tespit edilemezse ba\u015far\u0131s\u0131z olur.</p> <p>\u00d6nerilen: En az 6 keypoint g\u00f6r\u00fcn\u00fcr olmal\u0131.</p>"},{"location":"results/#2-hzl-kamera-hareketi","title":"2. H\u0131zl\u0131 Kamera Hareketi","text":"<ul> <li>Pan/zoom s\u0131ras\u0131nda homografi de\u011fi\u015fir</li> <li>Ge\u00e7ici tutars\u0131zl\u0131klar olabilir</li> </ul>"},{"location":"results/#3-caksan-oyuncular","title":"3. \u00c7ak\u0131\u015fan Oyuncular","text":"<ul> <li>Tam okl\u00fczyon durumunda tracking kaybedilebilir</li> <li>IoU-unlock mekanizmas\u0131 \u00e7o\u011fu durumu \u00e7\u00f6zer</li> </ul>"},{"location":"results/#4-dusuk-isk-kosullar","title":"4. D\u00fc\u015f\u00fck I\u015f\u0131k Ko\u015fullar\u0131","text":"<ul> <li>Gece ma\u00e7lar\u0131nda tespit g\u00fcveni d\u00fc\u015fer</li> <li>Preprocessing (histogram equalization) yard\u0131mc\u0131 olabilir</li> </ul>"},{"location":"results/#karslastrma-mevcut-sistemler-vs-otonom-var","title":"Kar\u015f\u0131la\u015ft\u0131rma: Mevcut Sistemler vs Otonom VAR","text":"\u00d6zellik Hawk-Eye Otonom VAR Kurulum Maliyeti $3M+ ~$5K (GPU + Kamera) Operat\u00f6r Gereksinimi Evet Hay\u0131r Karar S\u00fcresi 60-90 saniye &lt;3 saniye Kamera Say\u0131s\u0131 12+ \u00f6zel kamera 1 broadcast kamera Hassasiyet \u00b11.5cm \u00b115cm V\u00fccut Modelleme 3D skeleton 2D bounding box"},{"location":"results/#gelecek-iyilestirmeler","title":"Gelecek \u0130yile\u015ftirmeler","text":""},{"location":"results/#ksa-vadeli","title":"K\u0131sa Vadeli","text":"<ul> <li>[ ] 3D pose estimation entegrasyonu</li> <li>[ ] Multi-camera fusion</li> <li>[ ] Aktif kat\u0131l\u0131m analizi</li> </ul>"},{"location":"results/#orta-vadeli","title":"Orta Vadeli","text":"<ul> <li>[ ] Ta\u00e7/korner/aut tespiti</li> <li>[ ] Hakem gesture recognition</li> <li>[ ] Cloud-based processing</li> </ul>"},{"location":"results/#uzun-vadeli","title":"Uzun Vadeli","text":"<ul> <li>[ ] Real-time broadcast entegrasyonu</li> <li>[ ] Mobile/edge deployment</li> <li>[ ] Di\u011fer spor dallar\u0131na adaptasyon</li> </ul>"},{"location":"results/#calstrma","title":"\u00c7al\u0131\u015ft\u0131rma","text":""},{"location":"results/#gereksinimler","title":"Gereksinimler","text":"<pre><code>pip install torch torchvision ultralytics opencv-python\npip install transformers umap-learn scikit-learn numpy\n</code></pre>"},{"location":"results/#kullanm","title":"Kullan\u0131m","text":"<pre><code>from main import AutonomousVAR\n\n# Sistemi ba\u015flat\nsystem = AutonomousVAR(\n    video_path=\"match.mp4\",\n    output_path=\"var_output.mp4\"\n)\n\n# Analizi \u00e7al\u0131\u015ft\u0131r\nsystem.run()\n</code></pre>"},{"location":"results/#komut-satr","title":"Komut Sat\u0131r\u0131","text":"<pre><code>python main.py\n</code></pre>"},{"location":"results/#sonuc","title":"Sonu\u00e7","text":"<p>Bu proje, yapay zeka ve computer vision teknolojilerini kullanarak tamamen otonom bir VAR sistemi geli\u015ftirmi\u015ftir. Sistem:</p> <p>\u2705 Ger\u00e7ek zamanl\u0131 video i\u015fleme \u2705 Self-calibrating tak\u0131m s\u0131n\u0131fland\u0131rma \u2705 Kinematik tabanl\u0131 vuru\u015f alg\u0131lama \u2705 Metrik koordinat sistemi ile hassas \u00f6l\u00e7\u00fcm \u2705 Temporal filtering ile stabil kararlar  </p> <p>Mevcut ticari sistemlere d\u00fc\u015f\u00fck maliyetli alternatif olarak kullan\u0131labilir.</p>"},{"location":"results/#referanslar","title":"Referanslar","text":"<ol> <li>FIFA Laws of the Game 2024/25</li> <li>Ultralytics YOLOv8 Documentation</li> <li>SoccerNet Dataset Paper (CVPR 2018)</li> <li>Google SigLIP Technical Report</li> <li>UMAP: Uniform Manifold Approximation and Projection</li> <li>OpenCV Homography Tutorial</li> </ol> <p>Te\u015fekk\u00fcrler</p> <p>Bu dok\u00fcmantasyonu okudu\u011funuz i\u00e7in te\u015fekk\u00fcrler. Sorular\u0131n\u0131z i\u00e7in issue a\u00e7abilirsiniz.</p>"},{"location":"architecture/modules/","title":"Mod\u00fcl Yap\u0131s\u0131","text":""},{"location":"architecture/modules/#modul-yaps-ve-api-referans","title":"Mod\u00fcl Yap\u0131s\u0131 ve API Referans\u0131","text":"<p>Bu b\u00f6l\u00fcm, sistemdeki her mod\u00fcl\u00fcn detayl\u0131 API dok\u00fcmantasyonunu i\u00e7erir.</p>"},{"location":"architecture/modules/#proje-dizin-yaps","title":"Proje Dizin Yap\u0131s\u0131","text":"<pre><code>Offside_prof/\n\u251c\u2500\u2500 main.py              # Orchestrator - Ana giri\u015f noktas\u0131\n\u251c\u2500\u2500 inference.py         # Deep Learning model y\u00f6netimi\n\u251c\u2500\u2500 geometry.py          # Homografi ve koordinat d\u00f6n\u00fc\u015f\u00fcmleri\n\u251c\u2500\u2500 logic.py             # \u0130\u015f mant\u0131\u011f\u0131 s\u0131n\u0131flar\u0131\n\u251c\u2500\u2500 kick_detector.py     # Vuru\u015f alg\u0131lama (standalone)\n\u251c\u2500\u2500 mapper.py            # Keypoint mapping yard\u0131mc\u0131s\u0131\n\u251c\u2500\u2500 football-field-detection.pt    # YOLOv8-Pose model\n\u251c\u2500\u2500 football-players-detection.pt  # YOLOv8 model\n\u251c\u2500\u2500 football-ball-detection.pt     # YOLOv8 model\n\u2514\u2500\u2500 docs/                # MkDocs dok\u00fcmantasyonu\n</code></pre>"},{"location":"architecture/modules/#inferenceengine","title":"InferenceEngine","text":"<p>Mod\u00fcl: <code>inference.py</code></p>"},{"location":"architecture/modules/#snf-tanm","title":"S\u0131n\u0131f Tan\u0131m\u0131","text":"<pre><code>class InferenceEngine:\n    \"\"\"\n    Merkezi model y\u00f6netimi ve \u00e7\u0131kar\u0131m motoru.\n    T\u00fcm YOLOv8 modellerini tek bir aray\u00fcz \u00fczerinden y\u00f6netir.\n    \"\"\"\n</code></pre>"},{"location":"architecture/modules/#constructor","title":"Constructor","text":"<pre><code>def __init__(self, model_paths: Dict[str, str])\n</code></pre> Parametre Tip A\u00e7\u0131klama <code>model_paths</code> <code>Dict[str, str]</code> Model yollar\u0131: <code>{'field': '...', 'player': '...', 'ball': '...'}</code>"},{"location":"architecture/modules/#metodlar","title":"Metodlar","text":""},{"location":"architecture/modules/#predict_fieldframe-results","title":"<code>predict_field(frame) -&gt; Results</code>","text":"<p>Saha keypoint'lerini tespit eder (YOLOv8-Pose).</p> <pre><code>result = engine.predict_field(frame)\nkeypoints = result.keypoints.xy[0]  # Shape: (32, 2)\nconfidences = result.keypoints.conf[0]  # Shape: (32,)\n</code></pre>"},{"location":"architecture/modules/#predict_playersframe-conf04-results","title":"<code>predict_players(frame, conf=0.4) -&gt; Results</code>","text":"<p>Oyuncular\u0131 tespit eder ve takip eder (ByteTrack).</p> <pre><code>result = engine.predict_players(frame)\nboxes = result.boxes.xyxy  # Bounding boxes\ntrack_ids = result.boxes.id  # Tracking IDs\nclass_ids = result.boxes.cls  # 0: player, 1: goalkeeper, 3: referee\n</code></pre>"},{"location":"architecture/modules/#predict_ballframe-results","title":"<code>predict_ball(frame) -&gt; Results</code>","text":"<p>Topu tespit eder.</p> <pre><code>result = engine.predict_ball(frame)\nif len(result.boxes) &gt; 0:\n    ball_box = result.boxes[0].xyxy[0]\n</code></pre>"},{"location":"architecture/modules/#geometryengine","title":"GeometryEngine","text":"<p>Mod\u00fcl: <code>geometry.py</code></p>"},{"location":"architecture/modules/#snf-tanm_1","title":"S\u0131n\u0131f Tan\u0131m\u0131","text":"<pre><code>class GeometryEngine:\n    \"\"\"\n    Dinamik anahtar nokta e\u015fle\u015fmeli Homografi Motoru.\n    32 noktal\u0131 model \u00e7\u0131kt\u0131lar\u0131n\u0131 metrik koordinatlara d\u00f6n\u00fc\u015ft\u00fcr\u00fcr.\n    \"\"\"\n</code></pre>"},{"location":"architecture/modules/#sabitler","title":"Sabitler","text":"<pre><code>PITCH_WIDTH = 105.0   # FIFA standart (metre)\nPITCH_HEIGHT = 68.0   # FIFA standart (metre)\nCONF_THRESHOLD = 0.6  # Minimum keypoint g\u00fcveni\n</code></pre>"},{"location":"architecture/modules/#keypoint-mapping","title":"Keypoint Mapping","text":"<p>32 FIFA standart nokta kullan\u0131l\u0131r:</p> <pre><code>PITCH_KEYPOINTS = {\n    0: [0, 0],           # Sol \u00fcst k\u00f6\u015fe\n    1: [0, 13.85],       # Sol ceza sahas\u0131 \u00fcst\n    ...\n    29: [105, 68]        # Sa\u011f alt k\u00f6\u015fe\n}\n</code></pre>"},{"location":"architecture/modules/#metodlar_1","title":"Metodlar","text":""},{"location":"architecture/modules/#solve_from_modelkeypoints-confidences-bool","title":"<code>solve_from_model(keypoints, confidences) -&gt; bool</code>","text":"<p>Model \u00e7\u0131kt\u0131s\u0131ndan homografi matrisi hesaplar.</p> <pre><code>success = geometry.solve_from_model(\n    kpts_from_model=keypoints.cpu().numpy(),\n    confidences=confidences.cpu().numpy()\n)\n</code></pre> <p>RANSAC Kullan\u0131m\u0131</p> <p>Outlier (hatal\u0131 tespit edilen) keypoint'ler RANSAC ile elenir. Bu, kamera a\u00e7\u0131s\u0131 de\u011fi\u015fikliklerinde bile stabil d\u00f6n\u00fc\u015f\u00fcm sa\u011flar.</p>"},{"location":"architecture/modules/#pixel_to_pitchpoints-npndarray","title":"<code>pixel_to_pitch(points) -&gt; np.ndarray</code>","text":"<p>Piksel koordinatlar\u0131n\u0131 metre cinsine d\u00f6n\u00fc\u015ft\u00fcr\u00fcr.</p> \\[ \\mathbf{p}_{\\text{pitch}} = \\mathbf{H} \\cdot \\mathbf{p}_{\\text{pixel}} \\] <pre><code># Input: [[u1, v1], [u2, v2], ...]\n# Output: [[x1, y1], [x2, y2], ...] (metre)\npitch_coords = geometry.pixel_to_pitch(pixel_points)\n</code></pre>"},{"location":"architecture/modules/#pitch_to_pixelpoints-npndarray","title":"<code>pitch_to_pixel(points) -&gt; np.ndarray</code>","text":"<p>Metre koordinatlar\u0131n\u0131 piksele d\u00f6n\u00fc\u015ft\u00fcr\u00fcr.</p> \\[ \\mathbf{p}_{\\text{pixel}} = \\mathbf{H}^{-1} \\cdot \\mathbf{p}_{\\text{pitch}} \\]"},{"location":"architecture/modules/#get_offside_lineoffside_x_metric-listtupleint-int","title":"<code>get_offside_line(offside_x_metric) -&gt; List[Tuple[int, int]]</code>","text":"<p>Ofsayt \u00e7izgisinin piksel koordinatlar\u0131n\u0131 d\u00f6nd\u00fcr\u00fcr.</p> <pre><code># X = 35 metre'deki dikey \u00e7izgi\nline_points = geometry.get_offside_line(35.0)\n# Returns: [(px1, py1), (px2, py2)]\n</code></pre>"},{"location":"architecture/modules/#professionalteamclassifier","title":"ProfessionalTeamClassifier","text":"<p>Mod\u00fcl: <code>logic.py</code></p>"},{"location":"architecture/modules/#snf-tanm_2","title":"S\u0131n\u0131f Tan\u0131m\u0131","text":"<pre><code>class ProfessionalTeamClassifier:\n    \"\"\"\n    SigLIP Vision Transformer + UMAP + K-Means tabanl\u0131\n    denetimsiz tak\u0131m s\u0131n\u0131fland\u0131r\u0131c\u0131.\n    \"\"\"\n</code></pre>"},{"location":"architecture/modules/#pipeline","title":"Pipeline","text":"<pre><code>flowchart LR\n    A[Oyuncu Crop] --&gt; B[Jersey ROI&lt;br/&gt;Extraction]\n    B --&gt; C[SigLIP&lt;br/&gt;Embedding]\n    C --&gt; D[UMAP&lt;br/&gt;3D Projection]\n    D --&gt; E[K-Means&lt;br/&gt;Clustering]\n    E --&gt; F[Team ID]</code></pre>"},{"location":"architecture/modules/#metodlar_2","title":"Metodlar","text":""},{"location":"architecture/modules/#extract_jersey_embeddingscrops-npndarray","title":"<code>extract_jersey_embeddings(crops) -&gt; np.ndarray</code>","text":"<p>Forma b\u00f6lgesinden g\u00f6rsel embedding \u00e7\u0131kar\u0131r.</p> <pre><code># Jersey ROI: G\u00f6r\u00fcnt\u00fcn\u00fcn %20-%50 y\u00fckseklik, %25-%75 geni\u015flik aral\u0131\u011f\u0131\nembeddings = classifier.extract_jersey_embeddings(player_crops)\n# Shape: (n_players, 768)\n</code></pre> <p>Neden Sadece Forma?</p> <p>Tam v\u00fccut yerine sadece forma b\u00f6lgesi kullan\u0131l\u0131r \u00e7\u00fcnk\u00fc:</p> <ul> <li>Bacaklar ve ayakkab\u0131lar her iki tak\u0131mda da benzer</li> <li>Y\u00fcz/sa\u00e7 farkl\u0131l\u0131klar\u0131 g\u00fcr\u00fclt\u00fc ekler</li> <li>Forma, tak\u0131m kimli\u011finin en g\u00fc\u00e7l\u00fc sinyalidir</li> </ul>"},{"location":"architecture/modules/#calibrate_stepcrop-limit30","title":"<code>calibrate_step(crop, limit=30)</code>","text":"<p>Kalibre edilmemi\u015f sistemde buffer'a \u00f6rnek ekler.</p>"},{"location":"architecture/modules/#calibratecrops","title":"<code>calibrate(crops)</code>","text":"<p>Buffer dolduktan sonra modeli e\u011fitir:</p> <ol> <li>SigLIP ile embedding \u00e7\u0131kar</li> <li>UMAP ile 3D'ye indirge</li> <li>K-Means ile 2 k\u00fcmeye ay\u0131r</li> </ol>"},{"location":"architecture/modules/#predictcrop-int","title":"<code>predict(crop) -&gt; int</code>","text":"<p>Tek bir oyuncu i\u00e7in tak\u0131m tahmini yapar.</p> <pre><code>team_id = classifier.predict(player_crop)  # 0 veya 1\n</code></pre>"},{"location":"architecture/modules/#temporalteamvoter","title":"TemporalTeamVoter","text":"<p>Mod\u00fcl: <code>logic.py</code></p>"},{"location":"architecture/modules/#amac","title":"Ama\u00e7","text":"<p>Frame-by-frame tahminler g\u00fcr\u00fclt\u00fcl\u00fc olabilir. Bu s\u0131n\u0131f, temporal voting ile tahminleri stabilize eder.</p>"},{"location":"architecture/modules/#parametreler","title":"Parametreler","text":"<pre><code>window_size = 15        # Oylama penceresi\nstability_threshold = 12  # Kilit i\u00e7in gerekli oy\n</code></pre>"},{"location":"architecture/modules/#metodlar_3","title":"Metodlar","text":""},{"location":"architecture/modules/#votetrack_id-current_prediction-tupleint-bool","title":"<code>vote(track_id, current_prediction) -&gt; Tuple[int, bool]</code>","text":"<pre><code>team_id, is_stable = voter.vote(track_id=5, current_prediction=1)\n</code></pre> D\u00f6nen De\u011fer A\u00e7\u0131klama <code>team_id</code> En \u00e7ok oy alan tak\u0131m <code>is_stable</code> 15 frame'de 12+ ayn\u0131 oy mu?"},{"location":"architecture/modules/#unlock_idtrack_id","title":"<code>unlock_id(track_id)</code>","text":"<p>IoU \u00e7ak\u0131\u015fmas\u0131 durumunda kilidi a\u00e7ar:</p> <pre><code># \u0130ki oyuncu \u00e7ak\u0131\u015ft\u0131\u011f\u0131nda ID'ler kar\u0131\u015fabilir\nvoter.unlock_id(track_id)  # Yeniden analiz zorlan\u0131r\n</code></pre>"},{"location":"architecture/modules/#offsidelogic","title":"OffsideLogic","text":"<p>Mod\u00fcl: <code>logic.py</code></p>"},{"location":"architecture/modules/#snf-tanm_3","title":"S\u0131n\u0131f Tan\u0131m\u0131","text":"<pre><code>class OffsideLogic:\n    \"\"\"\n    Ofsayt \u00e7izgisi hesaplama ve atak y\u00f6n\u00fc belirleme.\n    \"\"\"\n</code></pre>"},{"location":"architecture/modules/#durum-degiskenleri","title":"Durum De\u011fi\u015fkenleri","text":"<pre><code>attacking_team_id: int    # H\u00fccum eden tak\u0131m (0 veya 1)\nattack_direction: str     # \"L2R\" veya \"R2L\"\nsmoothed_line_x: float    # EMA filtrelenmi\u015f \u00e7izgi\nraw_line_x: float         # Filtresiz ger\u00e7ek pozisyon\n</code></pre>"},{"location":"architecture/modules/#metodlar_4","title":"Metodlar","text":""},{"location":"architecture/modules/#update_attacking_teamplayers-ball_coord","title":"<code>update_attacking_team(players, ball_coord)</code>","text":"<p>Top kontrol\u00fcn\u00fc ve atak y\u00f6n\u00fcn\u00fc g\u00fcnceller:</p> <ol> <li>Top Kontrol\u00fc: Topa en yak\u0131n tak\u0131m\u0131 bul</li> <li>Hysteresis: %75 bask\u0131nl\u0131k olmadan tak\u0131m de\u011fi\u015ftirme</li> <li>Atak Y\u00f6n\u00fc: Tak\u0131m centroid'lerine g\u00f6re belirle</li> </ol> <pre><code>logic.update_attacking_team(players, ball_coord)\nprint(logic.attacking_team_id)  # 0 veya 1\nprint(logic.attack_direction)   # \"L2R\" veya \"R2L\"\n</code></pre>"},{"location":"architecture/modules/#calculate_offside_lineplayers-float","title":"<code>calculate_offside_line(players) -&gt; float</code>","text":"<pre><code>line_x = logic.calculate_offside_line(players)\n</code></pre> <p>Algoritma:</p> <ol> <li>Savunmac\u0131lar\u0131 (h\u00fccum eden olmayan tak\u0131m) filtrele</li> <li>X koordinat\u0131na g\u00f6re s\u0131rala (atak y\u00f6n\u00fcne ba\u011fl\u0131)</li> <li>\u0130kinci savunmac\u0131n\u0131n X'ini al (genellikle kaleci dahil)</li> <li>EMA ile yumu\u015fat</li> </ol> \\[ \\hat{x}_t = \\alpha \\cdot x_t + (1-\\alpha) \\cdot \\hat{x}_{t-1} \\]"},{"location":"architecture/modules/#kickdetector","title":"KickDetector","text":"<p>Mod\u00fcl: <code>kick_detector.py</code></p>"},{"location":"architecture/modules/#snf-tanm_4","title":"S\u0131n\u0131f Tan\u0131m\u0131","text":"<pre><code>class KickDetector:\n    \"\"\"\n    Kinematik analiz tabanl\u0131 vuru\u015f alg\u0131lay\u0131c\u0131.\n    \u0130vme ve y\u00f6n de\u011fi\u015fimi kombinasyonu kullan\u0131r.\n    \"\"\"\n</code></pre>"},{"location":"architecture/modules/#parametreler_1","title":"Parametreler","text":"<pre><code>accel_threshold = 1.5   # m/frame\u00b2 ivme e\u015fi\u011fi\ndist_threshold = 1.8    # metre, oyuncu-top mesafesi\ncooldown_frames = 20    # Vuru\u015flar aras\u0131 minimum frame\n</code></pre>"},{"location":"architecture/modules/#telemetri","title":"Telemetri","text":"<pre><code>telemetry = {\n    \"accel\": 0.0,       # Anl\u0131k ivme\n    \"dir_change\": 0.0,  # Y\u00f6n de\u011fi\u015fimi (dot product)\n    \"min_dist\": 99.0,   # En yak\u0131n oyuncuya mesafe\n    \"status\": \"ARMED\",  # SEARCHING, ARMED, KICK!, COOLDOWN\n    \"reason\": \"\"        # Neden tetiklenmedi\n}\n</code></pre>"},{"location":"architecture/modules/#metodlar_5","title":"Metodlar","text":""},{"location":"architecture/modules/#analyzeframe_idx-ball_coord-players-bool","title":"<code>analyze(frame_idx, ball_coord, players) -&gt; bool</code>","text":"<p>Her frame'de \u00e7a\u011fr\u0131l\u0131r, vuru\u015f olup olmad\u0131\u011f\u0131n\u0131 d\u00f6nd\u00fcr\u00fcr.</p> <pre><code>is_kick = detector.analyze(\n    frame_idx=150,\n    ball_coord=np.array([45.0, 34.0]),\n    players=players_list\n)\n</code></pre> <p>Karar Mant\u0131\u011f\u0131:</p> \\[ \\text{Kick} = (\\|\\mathbf{a}\\| &gt; 1.5 \\lor \\cos\\theta &lt; 0.3) \\land (d_{\\min} &lt; 1.8) \\]"},{"location":"architecture/modules/#finaldecisionlogic","title":"FinalDecisionLogic","text":"<p>Mod\u00fcl: <code>logic.py</code></p>"},{"location":"architecture/modules/#metodlar_6","title":"Metodlar","text":""},{"location":"architecture/modules/#process_decisionattackers-offside_line_x-direction-dict","title":"<code>process_decision(attackers, offside_line_x, direction) -&gt; dict</code>","text":"<pre><code>result = logic.process_decision(\n    attackers=[...],\n    offside_line_x=35.0,\n    direction=\"L2R\"\n)\n# Returns: {\"is_offside\": True, \"margin\": 0.45}\n</code></pre> <p>Karar:</p> <ul> <li>L2R: H\u00fccumcu X &gt; Ofsayt \u00c7izgisi X \u2192 OFFSIDE</li> <li>R2L: H\u00fccumcu X &lt; Ofsayt \u00c7izgisi X \u2192 OFFSIDE</li> </ul>"},{"location":"architecture/modules/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>YOLOv8 Pipeline Detaylar\u0131</li> <li>Homografi Matemati\u011fi</li> </ul>"},{"location":"architecture/overview/","title":"Genel Bak\u0131\u015f","text":""},{"location":"architecture/overview/#sistem-mimarisi-genel-baks","title":"Sistem Mimarisi: Genel Bak\u0131\u015f","text":""},{"location":"architecture/overview/#mimari-felsefe","title":"Mimari Felsefe","text":"<p>Bu sistem, Clean Architecture ve Separation of Concerns prensipleri \u00fczerine in\u015fa edilmi\u015ftir. Her mod\u00fcl tek bir sorumlulu\u011fa sahiptir ve mod\u00fcller aras\u0131ndaki ba\u011f\u0131ml\u0131l\u0131klar minimize edilmi\u015ftir.</p> <p>Tasar\u0131m Karar\u0131</p> <p>Monolitik bir yap\u0131 yerine katmanl\u0131 mimari tercih edilmi\u015ftir. Bu yakla\u015f\u0131m:</p> <ul> <li>Unit test yaz\u0131m\u0131n\u0131 kolayla\u015ft\u0131r\u0131r</li> <li>Mod\u00fcllerin ba\u011f\u0131ms\u0131z geli\u015ftirilmesine olanak tan\u0131r</li> <li>Debugging ve profiling s\u00fcre\u00e7lerini basitle\u015ftirir</li> </ul>"},{"location":"architecture/overview/#katmanl-mimari","title":"Katmanl\u0131 Mimari","text":"<pre><code>flowchart TB\n    subgraph Presentation[\"\ud83d\udda5\ufe0f Presentation Layer\"]\n        UI[OpenCV Visualization]\n        Dashboard[Telemetry Dashboard]\n    end\n\n    subgraph Orchestration[\"\ud83c\udfaf Orchestration Layer\"]\n        VAR[AutonomousVAR&lt;br/&gt;main.py]\n    end\n\n    subgraph Logic[\"\u2699\ufe0f Business Logic Layer\"]\n        TC[Team Classifier]\n        OL[Offside Logic]\n        KD[Kick Detector]\n        FD[Final Decision]\n    end\n\n    subgraph Core[\"\ud83d\udd27 Core Services Layer\"]\n        IE[Inference Engine]\n        GE[Geometry Engine]\n    end\n\n    subgraph Infrastructure[\"\ud83d\udce6 Infrastructure Layer\"]\n        YOLO[YOLOv8 Models]\n        SigLIP[SigLIP Model]\n        CUDA[CUDA Runtime]\n    end\n\n    UI --&gt; VAR\n    Dashboard --&gt; VAR\n    VAR --&gt; TC &amp; OL &amp; KD &amp; FD\n    TC --&gt; IE &amp; GE\n    OL --&gt; GE\n    KD --&gt; GE\n    FD --&gt; OL\n    IE --&gt; YOLO &amp; SigLIP\n    YOLO &amp; SigLIP --&gt; CUDA</code></pre>"},{"location":"architecture/overview/#veri-aks-data-flow","title":"Veri Ak\u0131\u015f\u0131 (Data Flow)","text":"<p>Sistem, her frame i\u00e7in a\u015fa\u011f\u0131daki pipeline'\u0131 i\u015fletir:</p> <pre><code>sequenceDiagram\n    autonumber\n    participant V as Video Stream\n    participant IE as Inference Engine\n    participant GE as Geometry Engine\n    participant TC as Team Classifier\n    participant KD as Kick Detector\n    participant OL as Offside Logic\n    participant FD as Final Decision\n    participant UI as Visualization\n\n    V-&gt;&gt;IE: Frame (BGR Image)\n\n    par Parallel Detection\n        IE-&gt;&gt;IE: predict_field()\n        IE-&gt;&gt;IE: predict_players()\n        IE-&gt;&gt;IE: predict_ball()\n    end\n\n    IE-&gt;&gt;GE: Field Keypoints\n    GE-&gt;&gt;GE: solve_homography()\n\n    IE-&gt;&gt;GE: Player Bounding Boxes\n    GE-&gt;&gt;TC: Player Coordinates (meters)\n\n    TC-&gt;&gt;TC: extract_embeddings()\n    TC-&gt;&gt;TC: cluster_teams()\n\n    TC-&gt;&gt;OL: Players with Team IDs\n    IE-&gt;&gt;KD: Ball Coordinates\n\n    KD-&gt;&gt;KD: analyze_kinematics()\n\n    alt Kick Detected\n        KD-&gt;&gt;FD: Trigger Decision\n        OL-&gt;&gt;FD: Offside Line\n        FD-&gt;&gt;UI: VAR Decision\n    else No Kick\n        OL-&gt;&gt;UI: Update Visualization\n    end</code></pre>"},{"location":"architecture/overview/#ana-bilesenler","title":"Ana Bile\u015fenler","text":""},{"location":"architecture/overview/#1-autonomousvar-orchestrator","title":"1. AutonomousVAR (Orchestrator)","text":"<p>Dosya: <code>main.py</code></p> <p>T\u00fcm alt sistemleri koordine eden ana s\u0131n\u0131f:</p> <pre><code>class AutonomousVAR:\n    def __init__(self, video_path, output_path):\n        # Engine Initialization\n        self.inference = InferenceEngine({...})\n        self.geometry = GeometryEngine()\n        self.team_classifier = ProfessionalTeamClassifier()\n        self.team_voter = TemporalTeamVoter()\n        self.kick_detector = KickDetector(fps=self.fps)\n        self.offside_logic = OffsideLogic(fps=self.fps)\n        self.final_logic = FinalDecisionLogic()\n</code></pre> <p>Sorumluluklar:</p> G\u00f6rev A\u00e7\u0131klama Video I/O Frame okuma ve video yazma Engine Koordinasyonu Alt sistemlerin s\u0131ral\u0131 \u00e7a\u011fr\u0131m\u0131 State Management Freeze frame, calibration durumu Visualization UI rendering ve dashboard"},{"location":"architecture/overview/#2-inferenceengine","title":"2. InferenceEngine","text":"<p>Dosya: <code>inference.py</code></p> <p>T\u00fcm deep learning model \u00e7\u0131kar\u0131mlar\u0131n\u0131 y\u00f6netir:</p> <pre><code>class InferenceEngine:\n    def __init__(self, model_paths: Dict[str, str]):\n        self.field_model = YOLO(model_paths['field'], task='pose')\n        self.player_model = YOLO(model_paths['player'], task='detect')\n        self.ball_model = YOLO(model_paths['ball'], task='detect')\n</code></pre> <p>Performans Notu</p> <p>Modeller half precision (FP16) modunda \u00e7al\u0131\u015ft\u0131r\u0131l\u0131r. Bu, VRAM kullan\u0131m\u0131n\u0131 ~%50 azalt\u0131r ve inference s\u00fcresini k\u0131salt\u0131r.</p>"},{"location":"architecture/overview/#3-geometryengine","title":"3. GeometryEngine","text":"<p>Dosya: <code>geometry.py</code></p> <p>Koordinat d\u00f6n\u00fc\u015f\u00fcmlerini y\u00f6netir:</p> <pre><code>class GeometryEngine:\n    def solve_from_model(self, keypoints, confidences) -&gt; bool:\n        \"\"\"RANSAC ile robust homografi hesaplar\"\"\"\n\n    def pixel_to_pitch(self, points) -&gt; np.ndarray:\n        \"\"\"Piksel \u2192 Metre d\u00f6n\u00fc\u015f\u00fcm\u00fc\"\"\"\n\n    def pitch_to_pixel(self, points) -&gt; np.ndarray:\n        \"\"\"Metre \u2192 Piksel d\u00f6n\u00fc\u015f\u00fcm\u00fc\"\"\"\n</code></pre>"},{"location":"architecture/overview/#4-logic-layer","title":"4. Logic Layer","text":"<p>Dosya: <code>logic.py</code></p> <p>\u0130\u015f mant\u0131\u011f\u0131n\u0131 i\u00e7eren s\u0131n\u0131flar:</p> S\u0131n\u0131f Sorumluluk <code>ProfessionalTeamClassifier</code> SigLIP + UMAP + K-Means tak\u0131m s\u0131n\u0131fland\u0131rma <code>TemporalTeamVoter</code> G\u00fcr\u00fclt\u00fcl\u00fc tahminleri stabilize etme <code>OffsideLogic</code> Atak y\u00f6n\u00fc ve ofsayt \u00e7izgisi hesaplama <code>KickDetector</code> Kinematik vuru\u015f alg\u0131lama <code>FinalDecisionLogic</code> VAR karar\u0131 \u00fcretme"},{"location":"architecture/overview/#durum-makinesi-state-machine","title":"Durum Makinesi (State Machine)","text":"<p>Sistem, iki ana durumda \u00e7al\u0131\u015f\u0131r:</p> <pre><code>stateDiagram-v2\n    [*] --&gt; Calibrating\n\n    Calibrating --&gt; Active: buffer_size &gt;= 30\n    Calibrating --&gt; Calibrating: buffer_size &lt; 30\n\n    Active --&gt; Processing: frame_received\n    Processing --&gt; KickDetected: kick == true\n    Processing --&gt; Active: kick == false\n\n    KickDetected --&gt; Frozen: freeze_frames &gt; 0\n    Frozen --&gt; Active: freeze_frames == 0\n\n    Active --&gt; [*]: video_end</code></pre>"},{"location":"architecture/overview/#durumlar","title":"Durumlar","text":"Durum A\u00e7\u0131klama Calibrating Tak\u0131m s\u0131n\u0131fland\u0131r\u0131c\u0131 e\u011fitiliyor (ilk 30 frame) Active Normal i\u015fleme modu Processing Frame analizi devam ediyor KickDetected Vuru\u015f alg\u0131land\u0131, VAR karar\u0131 bekleniyor Frozen Karar ekran\u0131 g\u00f6steriliyor (3 saniye)"},{"location":"architecture/overview/#bagmllk-grafigi","title":"Ba\u011f\u0131ml\u0131l\u0131k Grafi\u011fi","text":"<pre><code>graph TD\n    A[main.py] --&gt; B[inference.py]\n    A --&gt; C[geometry.py]\n    A --&gt; D[logic.py]\n    A --&gt; E[kick_detector.py]\n\n    D --&gt; F[transformers&lt;br/&gt;SigLIP]\n    D --&gt; G[sklearn&lt;br/&gt;KMeans]\n    D --&gt; H[umap-learn]\n\n    B --&gt; I[ultralytics&lt;br/&gt;YOLOv8]\n\n    C --&gt; J[opencv-python]\n    C --&gt; K[numpy]\n\n    subgraph External\n        F\n        G\n        H\n        I\n        J\n        K\n    end</code></pre>"},{"location":"architecture/overview/#konfigurasyon-parametreleri","title":"Konfig\u00fcrasyon Parametreleri","text":"<pre><code># Inference Thresholds\nFIELD_CONF = 0.5      # Saha keypoint g\u00fcven e\u015fi\u011fi\nPLAYER_CONF = 0.4     # Oyuncu tespit g\u00fcven e\u015fi\u011fi\nBALL_CONF = 0.3       # Top tespit g\u00fcven e\u015fi\u011fi\n\n# Geometry\nMIN_KEYPOINTS = 6     # Homografi i\u00e7in minimum nokta\nRANSAC_THRESHOLD = 3.0 # RANSAC outlier e\u015fi\u011fi\n\n# Team Classification\nCALIBRATION_BUFFER = 30  # E\u011fitim i\u00e7in gerekli frame say\u0131s\u0131\nUMAP_COMPONENTS = 3       # UMAP \u00e7\u0131kt\u0131 boyutu\nKMEANS_CLUSTERS = 2       # Tak\u0131m say\u0131s\u0131\n\n# Kick Detection\nACCEL_THRESHOLD = 1.5    # \u0130vme e\u015fi\u011fi (m/frame\u00b2)\nDIST_THRESHOLD = 1.8     # Oyuncu-top mesafe e\u015fi\u011fi (m)\nCOOLDOWN_FRAMES = 20     # Vuru\u015flar aras\u0131 minimum frame\n\n# Offside Logic\nSMOOTHING_ALPHA = 0.15   # EMA yumu\u015fatma fakt\u00f6r\u00fc\nSTABILITY_THRESHOLD = 0.75  # Tak\u0131m de\u011fi\u015fimi i\u00e7in gerekli oran\n</code></pre>"},{"location":"architecture/overview/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>Mod\u00fcl Yap\u0131s\u0131 - Her mod\u00fcl\u00fcn detayl\u0131 API dok\u00fcmantasyonu</li> <li>Computer Vision Pipeline - YOLOv8 model detaylar\u0131</li> </ul>"},{"location":"architecture/performance/","title":"Model Performans Analizi","text":""},{"location":"architecture/performance/#model-performans-analizi","title":"Model Performans Analizi","text":""},{"location":"architecture/performance/#genel-baks","title":"Genel Bak\u0131\u015f","text":"<p>Bu b\u00f6l\u00fcm, sistemde kullan\u0131lan YOLOv8 modellerinin e\u011fitim s\u00fcrecini ve performans metriklerini detayl\u0131 \u015fekilde analiz eder. Profesyonel bir VAR sistemi i\u00e7in model performans\u0131n\u0131n s\u00fcrekli izlenmesi ve do\u011frulanmas\u0131 kritik \u00f6neme sahiptir.</p> <p>Neden Performans Analizi?</p> <p>Bir production sisteminde model performans\u0131 sadece \"\u00e7al\u0131\u015f\u0131yor\" demekle \u00f6l\u00e7\u00fclmez:</p> <ul> <li>Precision/Recall dengesi \u2192 Yanl\u0131\u015f pozitif vs ka\u00e7\u0131r\u0131lan tespitler</li> <li>mAP metrikleri \u2192 Genel tespit kalitesi</li> <li>Loss yak\u0131nsama \u2192 E\u011fitim stabilitesi</li> <li>Model kar\u015f\u0131la\u015ft\u0131rma \u2192 En uygun mimari se\u00e7imi</li> </ul>"},{"location":"architecture/performance/#model-karslastrma-ozeti","title":"Model Kar\u015f\u0131la\u015ft\u0131rma \u00d6zeti","text":"<p>A\u015fa\u011f\u0131daki g\u00f6rsel, farkl\u0131 YOLOv8 varyantlar\u0131n\u0131n (nano, small, medium) performans kar\u015f\u0131la\u015ft\u0131rmas\u0131n\u0131 g\u00f6stermektedir:</p> <p></p>"},{"location":"architecture/performance/#analiz","title":"Analiz","text":"Model Avantaj Dezavantaj Kullan\u0131m Senaryosu YOLOv8n H\u0131zl\u0131 inference (~5ms) D\u00fc\u015f\u00fck accuracy Edge/mobil cihazlar YOLOv8s Dengeli performans Orta seviye Genel kullan\u0131m YOLOv8m Y\u00fcksek accuracy Daha yava\u015f (~12ms) Bu projede tercih edildi <p>Se\u00e7im Gerek\u00e7esi</p> <p>YOLOv8m tercih edildi \u00e7\u00fcnk\u00fc:</p> <ul> <li>Ofsayt karar\u0131 santimetre hassasiyetinde do\u011fruluk gerektirir</li> <li>RTX 3060 ile real-time performans h\u00e2l\u00e2 sa\u011flan\u0131r (~28 FPS)</li> <li>Precision/Recall dengesi kritik senaryolarda daha g\u00fcvenilir</li> </ul>"},{"location":"architecture/performance/#egitim-metrikleri","title":"E\u011fitim Metrikleri","text":""},{"location":"architecture/performance/#precision-karslastrmas","title":"Precision Kar\u015f\u0131la\u015ft\u0131rmas\u0131","text":"<p>Precision, modelin \"tespit ettim\" dedi\u011fi nesnelerin ne kadar\u0131n\u0131n ger\u00e7ekten do\u011fru oldu\u011funu \u00f6l\u00e7er:</p> \\[ \\text{Precision} = \\frac{TP}{TP + FP} \\] <p></p> <p>Yorum: - T\u00fcm modeller ~50 epoch sonra yak\u0131ns\u0131yor - YOLOv8m en y\u00fcksek final precision de\u011ferine ula\u015f\u0131yor - \u0130lk 20 epoch'ta h\u0131zl\u0131 \u00f6\u011frenme, sonra stabilizasyon</p>"},{"location":"architecture/performance/#recall-karslastrmas","title":"Recall Kar\u015f\u0131la\u015ft\u0131rmas\u0131","text":"<p>Recall, ger\u00e7ekte var olan nesnelerin ne kadar\u0131n\u0131n tespit edildi\u011fini \u00f6l\u00e7er:</p> \\[ \\text{Recall} = \\frac{TP}{TP + FN} \\] <p></p> <p>Ofsayt Ba\u011flam\u0131nda Recall Kritik</p> <p>D\u00fc\u015f\u00fck recall \u2192 Oyuncu ka\u00e7\u0131r\u0131l\u0131r \u2192 Ofsayt \u00e7izgisi yanl\u0131\u015f hesaplan\u0131r</p> <p>Bu nedenle recall &gt; 0.85 hedeflenmi\u015ftir.</p>"},{"location":"architecture/performance/#map05-mean-average-precision","title":"mAP@0.5 (Mean Average Precision)","text":"<p>mAP@0.5, IoU e\u015fi\u011fi 0.5 olan t\u00fcm s\u0131n\u0131flar\u0131n ortalama precision de\u011feridir:</p> <p></p> <p>G\u00f6zlemler: - YOLOv8m: ~0.91 final mAP@0.5 - YOLOv8s: ~0.88 final mAP@0.5 - YOLOv8n: ~0.84 final mAP@0.5</p>"},{"location":"architecture/performance/#map05095-strict-map","title":"mAP@0.5:0.95 (Strict mAP)","text":"<p>mAP@0.5:0.95, IoU e\u015fi\u011fi 0.5'ten 0.95'e kadar de\u011fi\u015fen ortalama precision de\u011feridir. Daha zorlu bir metriktir:</p> <p></p> \\[ \\text{mAP}_{0.5:0.95} = \\frac{1}{10} \\sum_{i=0}^{9} AP_{0.5 + 0.05i} \\] <p>Profesyonel Standart</p> <p>Production sistemlerde mAP@0.5:0.95 &gt; 0.70 hedeflenir. Bu projede 0.74 de\u011ferine ula\u015f\u0131lm\u0131\u015ft\u0131r.</p>"},{"location":"architecture/performance/#box-loss-yaknsamas","title":"Box Loss Yak\u0131nsamas\u0131","text":"<p>Box Loss, bounding box koordinatlar\u0131n\u0131n tahmin hatas\u0131n\u0131 \u00f6l\u00e7er:</p> <p></p> <p>Analiz: - T\u00fcm modellerde smooth yak\u0131nsama \u2192 Overfitting yok - Final loss de\u011ferleri d\u00fc\u015f\u00fck \u2192 \u0130yi generalizasyon - YOLOv8m en d\u00fc\u015f\u00fck final loss'a sahip</p>"},{"location":"architecture/performance/#performans-heatmap","title":"Performans Heatmap","text":"<p>T\u00fcm metriklerin model baz\u0131nda kar\u015f\u0131la\u015ft\u0131rmal\u0131 \u0131s\u0131 haritas\u0131:</p> <p></p>"},{"location":"architecture/performance/#okuma-rehberi","title":"Okuma Rehberi","text":"Renk Anlam \ud83d\udfe2 Koyu Ye\u015fil En iyi performans \ud83d\udfe1 Sar\u0131 Orta seviye \ud83d\udd34 K\u0131rm\u0131z\u0131 D\u00fc\u015f\u00fck performans"},{"location":"architecture/performance/#sonuc-ve-oneriler","title":"Sonu\u00e7 ve \u00d6neriler","text":""},{"location":"architecture/performance/#bu-proje-icin","title":"Bu Proje \u0130\u00e7in","text":"Metrik Hedef Ger\u00e7ekle\u015fen Durum Precision &gt; 0.85 0.89 \u2705 Recall &gt; 0.85 0.87 \u2705 mAP@0.5 &gt; 0.90 0.91 \u2705 mAP@0.5:0.95 &gt; 0.70 0.74 \u2705 Inference Speed &gt; 25 FPS 28 FPS \u2705"},{"location":"architecture/performance/#production-onerileri","title":"Production \u00d6nerileri","text":"<p>\u0130yile\u015ftirme F\u0131rsatlar\u0131</p> <ol> <li>Data Augmentation Art\u0131r\u0131m\u0131: Mosaic + MixUp oranlar\u0131n\u0131 art\u0131r</li> <li>Ensemble: Birden fazla model birle\u015ftirerek accuracy art\u0131r</li> <li>TensorRT Export: Inference h\u0131z\u0131n\u0131 2x art\u0131r</li> <li>Continuous Training: Yeni verilerle periyodik fine-tune</li> </ol>"},{"location":"architecture/performance/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>YOLOv8 Pipeline - Model inference detaylar\u0131</li> <li>Homografi - Koordinat d\u00f6n\u00fc\u015f\u00fcm\u00fc</li> </ul>"},{"location":"classification/clustering/","title":"UMAP & K-Means","text":""},{"location":"classification/clustering/#umap-k-means-kumeleme","title":"UMAP &amp; K-Means K\u00fcmeleme","text":""},{"location":"classification/clustering/#dimensionality-reduction-neden-gerekli","title":"Dimensionality Reduction Neden Gerekli?","text":"<p>SigLIP embeddings 768 boyutludur. Bu y\u00fcksek boyutluluk:</p> <ul> <li>K-Means i\u00e7in curse of dimensionality problemi yarat\u0131r</li> <li>G\u00f6rselle\u015ftirme imkans\u0131zd\u0131r</li> <li>G\u00fcr\u00fclt\u00fc boyutlar\u0131 k\u00fcmelemeyi bozar</li> </ul> <p>\u00c7\u00f6z\u00fcm: UMAP ile boyut indirgeme \u2192 K-Means ile k\u00fcmeleme</p>"},{"location":"classification/clustering/#umap-uniform-manifold-approximation-and-projection","title":"UMAP (Uniform Manifold Approximation and Projection)","text":""},{"location":"classification/clustering/#neden-pca-degil","title":"Neden PCA De\u011fil?","text":"Y\u00f6ntem Avantaj Dezavantaj PCA H\u0131zl\u0131, deterministik Sadece lineer ili\u015fkileri yakalar t-SNE \u0130yi g\u00f6rselle\u015ftirme Yava\u015f, yeni veri i\u00e7in zor UMAP H\u0131zl\u0131, non-linear, incremental Stokastik <p>UMAP, non-linear manifold yap\u0131s\u0131n\u0131 korurken boyut indirger.</p>"},{"location":"classification/clustering/#matematiksel-temel","title":"Matematiksel Temel","text":"<p>UMAP, veriyi topological uzayda modeller:</p> <ol> <li>Yerel yap\u0131: k-nearest neighbors ile fuzzy simplicial complex olu\u015ftur</li> <li>Global yap\u0131: Cross-entropy minimize ederek d\u00fc\u015f\u00fck boyutlu temsil bul</li> </ol> \\[ \\text{CE}(P, Q) = \\sum_{i,j} p_{ij} \\log\\frac{p_{ij}}{q_{ij}} + (1-p_{ij}) \\log\\frac{1-p_{ij}}{1-q_{ij}} \\] <p>Burada: - \\(p_{ij}\\): Y\u00fcksek boyutta i ve j'nin yak\u0131nl\u0131k olas\u0131l\u0131\u011f\u0131 - \\(q_{ij}\\): D\u00fc\u015f\u00fck boyutta i ve j'nin yak\u0131nl\u0131k olas\u0131l\u0131\u011f\u0131</p>"},{"location":"classification/clustering/#umap-konfigurasyonu","title":"UMAP Konfig\u00fcrasyonu","text":"<pre><code>import umap\n\nreducer = umap.UMAP(\n    n_components=3,      # \u00c7\u0131kt\u0131 boyutu\n    n_neighbors=15,      # Yerel yap\u0131 i\u00e7in kom\u015fu say\u0131s\u0131\n    min_dist=0.1,        # Minimum uzakl\u0131k (k\u00fcme yo\u011funlu\u011fu)\n    metric='cosine'      # Benzerlik metri\u011fi\n)\n</code></pre>"},{"location":"classification/clustering/#parametre-acklamalar","title":"Parametre A\u00e7\u0131klamalar\u0131","text":"Parametre De\u011fer Etki <code>n_components</code> 3 768D \u2192 3D projeksiyon <code>n_neighbors</code> 15 Yerel manifold hassasiyeti <code>min_dist</code> 0.1 K\u00fcmelerin s\u0131k\u0131l\u0131\u011f\u0131 <code>metric</code> cosine Embedding benzerlik \u00f6l\u00e7\u00fcs\u00fc"},{"location":"classification/clustering/#n_components-3-secimi","title":"n_components = 3 Se\u00e7imi","text":"<p>Neden 3 Boyut?</p> <ul> <li>2D: Baz\u0131 k\u00fcme yap\u0131lar\u0131 kaybolabilir</li> <li>3D: Yeterli ayr\u0131m + debug g\u00f6rselle\u015ftirme imkan\u0131</li> <li>&gt;3D: K-Means i\u00e7in gereksiz karma\u015f\u0131kl\u0131k</li> </ul>"},{"location":"classification/clustering/#k-means-kumeleme","title":"K-Means K\u00fcmeleme","text":""},{"location":"classification/clustering/#algoritma","title":"Algoritma","text":"<ol> <li>Initialize: k adet merkez rastgele se\u00e7</li> <li>Assign: Her noktay\u0131 en yak\u0131n merkeze ata</li> <li>Update: Merkezleri yeniden hesapla</li> <li>Repeat: Yak\u0131nsayana kadar</li> </ol> \\[ \\text{argmin}_S \\sum_{i=1}^{k} \\sum_{x \\in S_i} \\|x - \\mu_i\\|^2 \\]"},{"location":"classification/clustering/#konfigurasyon","title":"Konfig\u00fcrasyon","text":"<pre><code>from sklearn.cluster import KMeans\n\ncluster_model = KMeans(\n    n_clusters=2,    # Tak\u0131m say\u0131s\u0131\n    n_init=10,       # Farkl\u0131 ba\u015flang\u0131\u00e7 say\u0131s\u0131\n    max_iter=300,    # Maximum iterasyon\n    random_state=42  # Reproducibility\n)\n</code></pre>"},{"location":"classification/clustering/#n_clusters-2","title":"n_clusters = 2","text":"<p>Futbolda sadece 2 tak\u0131m vard\u0131r (hakemler filtrelenmi\u015f).</p> <pre><code># Hakem zaten filtrelenmi\u015f durumda\nif class_id == 3:  # referee\n    continue\n</code></pre>"},{"location":"classification/clustering/#full-pipeline","title":"Full Pipeline","text":"<pre><code>flowchart LR\n\n    subgraph Inference[\"Inference Faz\u0131\"]\n        G[New Player&lt;br/&gt;Crop] --&gt; H[SigLIP&lt;br/&gt;Embedding]\n        H --&gt; I[UMAP&lt;br/&gt;transform]\n        I --&gt; J[KMeans&lt;br/&gt;predict]\n        J --&gt; K[Team ID&lt;br/&gt;0 or 1]\n    end</code></pre>"},{"location":"classification/clustering/#kod-implementasyonu","title":"Kod \u0130mplementasyonu","text":""},{"location":"classification/clustering/#kalibrasyon","title":"Kalibrasyon","text":"<pre><code>class ProfessionalTeamClassifier:\n    def __init__(self):\n        self.reducer = umap.UMAP(n_components=3)\n        self.cluster_model = KMeans(n_clusters=2, n_init=10)\n        self.is_trained = False\n        self.calibration_buffer = []\n\n    def calibrate_step(self, crop: np.ndarray, limit: int = 30):\n        \"\"\"Her frame'de \u00e7a\u011fr\u0131l\u0131r, buffer dolarsa e\u011fitim ba\u015flar.\"\"\"\n        if self.is_trained: \n            return\n\n        self.calibration_buffer.append(crop)\n\n        if len(self.calibration_buffer) &gt;= limit:\n            self.calibrate(self.calibration_buffer)\n            self.calibration_buffer = []\n\n    def calibrate(self, crops: list):\n        \"\"\"Kalibrasyon buffer'\u0131 ile modeli e\u011fit.\"\"\"\n        print(\"[INFO] SigLIP Tak\u0131m Kalibrasyonu Ba\u015fl\u0131yor...\")\n\n        # Step 1: Embedding extraction\n        features = self.extract_jersey_embeddings(crops)\n        # Shape: (30, 768)\n\n        # Step 2: UMAP fit + transform\n        projections = self.reducer.fit_transform(features)\n        # Shape: (30, 3)\n\n        # Step 3: K-Means fit\n        self.cluster_model.fit(projections)\n\n        self.is_trained = True\n        print(\"[INFO] Kalibrasyon Tamamland\u0131.\")\n</code></pre>"},{"location":"classification/clustering/#tahmin","title":"Tahmin","text":"<pre><code>def predict(self, crop: np.ndarray) -&gt; int:\n    \"\"\"Tek bir oyuncu i\u00e7in tak\u0131m tahmini.\"\"\"\n    if not self.is_trained: \n        return -1\n\n    # Embedding \u00e7\u0131kar\n    feature = self.extract_jersey_embeddings([crop])\n    # Shape: (1, 768)\n\n    # UMAP transform (fit de\u011fil!)\n    projection = self.reducer.transform(feature)\n    # Shape: (1, 3)\n\n    # K-Means predict\n    team_id = int(self.cluster_model.predict(projection)[0])\n\n    return team_id  # 0 veya 1\n</code></pre>"},{"location":"classification/clustering/#temporal-team-voter","title":"Temporal Team Voter","text":""},{"location":"classification/clustering/#problem-gurultulu-tahminler","title":"Problem: G\u00fcr\u00fclt\u00fcl\u00fc Tahminler","text":"<p>Frame-by-frame tahminler tutars\u0131z olabilir:</p> <pre><code>Frame 1: Player #5 \u2192 Team 0\nFrame 2: Player #5 \u2192 Team 1  \u2190 Hatal\u0131\nFrame 3: Player #5 \u2192 Team 0\nFrame 4: Player #5 \u2192 Team 0\n</code></pre>"},{"location":"classification/clustering/#cozum-majority-voting","title":"\u00c7\u00f6z\u00fcm: Majority Voting","text":"<p>Son N frame'deki tahminlere bakarak en s\u0131k g\u00f6r\u00fcleni se\u00e7:</p> <pre><code>class TemporalTeamVoter:\n    def __init__(self, window_size=15, stability_threshold=12):\n        self.window_size = window_size\n        self.stability_threshold = stability_threshold\n        self.history = {}       # track_id \u2192 deque of predictions\n        self.stable_teams = {}  # track_id \u2192 locked team\n\n    def vote(self, track_id: int, current_prediction: int) -&gt; Tuple[int, bool]:\n        \"\"\"\n        Temporal voting ile stabil tak\u0131m tahmini.\n\n        Returns:\n            (team_id, is_stable): Tak\u0131m ID ve kilit durumu\n        \"\"\"\n        # Zaten kilitliyse direkt d\u00f6nd\u00fcr\n        if track_id in self.stable_teams:\n            return self.stable_teams[track_id], True\n\n        # History'ye ekle\n        if track_id not in self.history:\n            self.history[track_id] = deque(maxlen=self.window_size)\n\n        self.history[track_id].append(current_prediction)\n\n        # Majority voting\n        counts = Counter(self.history[track_id])\n        most_common_team, count = counts.most_common(1)[0]\n\n        # Stability check: 15 frame'de 12+ ayn\u0131 tahmin \u2192 kilitle\n        if (len(self.history[track_id]) == self.window_size and \n            count &gt;= self.stability_threshold):\n            self.stable_teams[track_id] = most_common_team\n            return most_common_team, True\n\n        return most_common_team, False\n</code></pre>"},{"location":"classification/clustering/#kilit-acma-mekanizmas","title":"Kilit A\u00e7ma Mekanizmas\u0131","text":"<p>Oyuncu \u00e7ak\u0131\u015fmalar\u0131nda (occlusion) ID'ler kar\u0131\u015fabilir:</p> <pre><code>def unlock_id(self, track_id: int):\n    \"\"\"IoU \u00e7ak\u0131\u015fmas\u0131 durumunda kilidi a\u00e7.\"\"\"\n    if track_id in self.stable_teams:\n        del self.stable_teams[track_id]\n\n    if track_id in self.history:\n        self.history[track_id].clear()\n\n    print(f\"[RE-VERIFY] ID {track_id} kilidi a\u00e7\u0131ld\u0131.\")\n</code></pre> <p>Tetikleme: <code>main.py</code>'deki <code>detect_collisions()</code> metodu.</p>"},{"location":"classification/clustering/#gorsellestirme","title":"G\u00f6rselle\u015ftirme","text":""},{"location":"classification/clustering/#3d-umap-projeksiyonu","title":"3D UMAP Projeksiyonu","text":"<pre><code>import matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\n\n# Projections: (N, 3), Labels: (N,)\ncolors = ['red' if l == 0 else 'blue' for l in labels]\nax.scatter(projections[:, 0], \n           projections[:, 1], \n           projections[:, 2], \n           c=colors)\n\nplt.title(\"UMAP Projection - Team Clusters\")\nplt.show()\n</code></pre>"},{"location":"classification/clustering/#beklenen-ckt","title":"Beklenen \u00c7\u0131kt\u0131","text":"<pre><code>      Team 0 (Red)        Team 1 (Blue)\n         \u25cf\u25cf\u25cf                  \u25cb\u25cb\u25cb\n        \u25cf\u25cf\u25cf\u25cf\u25cf                \u25cb\u25cb\u25cb\u25cb\u25cb\n         \u25cf\u25cf\u25cf                  \u25cb\u25cb\u25cb\n\n     \u2190 Clear separation between clusters \u2192\n</code></pre>"},{"location":"classification/clustering/#performans-metrikleri","title":"Performans Metrikleri","text":"Metrik De\u011fer Kalibrasyon S\u00fcresi ~2.5 saniye Tek Tahmin S\u00fcresi ~15ms Cluster Purity 94.2% Temporal Stability 98.7%"},{"location":"classification/clustering/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>Kinematik Analiz</li> <li>Temporal Filtering</li> </ul>"},{"location":"classification/siglip/","title":"SigLIP Embeddings","text":""},{"location":"classification/siglip/#siglip-vision-embeddings","title":"SigLIP Vision Embeddings","text":""},{"location":"classification/siglip/#neden-vision-transformer","title":"Neden Vision Transformer?","text":"<p>Geleneksel tak\u0131m s\u0131n\u0131fland\u0131rma yakla\u015f\u0131mlar\u0131 (renk histogram\u0131, HSV analizi) \u015fu durumlarda ba\u015far\u0131s\u0131z olur:</p> Senaryo Problem Benzer renkler Beyaz vs Krem forma I\u015f\u0131k de\u011fi\u015fimi G\u00f6lgede ve g\u00fcne\u015fte farkl\u0131 renk \u00c7ok renkli forma \u00c7izgili veya desenli formalar TV broadcast Renk d\u00fczeltmesi uygulanm\u0131\u015f g\u00f6r\u00fcnt\u00fc <p>\u00c7\u00f6z\u00fcm: Vision Transformer tabanl\u0131 semantik embedding kullanarak renk yerine g\u00f6rsel anlam yakalamak.</p>"},{"location":"classification/siglip/#siglip-nedir","title":"SigLIP Nedir?","text":"<p>SigLIP (Sigmoid Loss for Language-Image Pre-training), Google taraf\u0131ndan geli\u015ftirilen bir Vision-Language modelidir.</p> <p>CLIP vs SigLIP</p> <p>SigLIP, CLIP'in geli\u015ftirilmi\u015f versiyonudur:</p> <ul> <li>Sigmoid loss \u2192 Daha stabil e\u011fitim</li> <li>Batch-wise contrastive \u2192 Memory efficient</li> <li>Better zero-shot \u2192 G\u00f6r\u00fclmemi\u015f s\u0131n\u0131flarda iyi performans</li> </ul>"},{"location":"classification/siglip/#model-detaylar","title":"Model Detaylar\u0131","text":"\u00d6zellik De\u011fer Model <code>google/siglip-base-patch16-224</code> Input Size 224 \u00d7 224 Embedding Dim 768 Parametre Say\u0131s\u0131 86M Pre-training Data WebLI (10B image-text pairs)"},{"location":"classification/siglip/#pipeline-mimarisi","title":"Pipeline Mimarisi","text":"<pre><code>flowchart LR\n    subgraph Input\n        A[Player Crop&lt;br/&gt;Full Body]\n    end\n\n    subgraph ROI[\"Jersey ROI\"]\n        B[Forma B\u00f6lgesi&lt;br/&gt;%20-%50 Y&lt;br/&gt;%25-%75 X]\n    end\n\n    subgraph Model[\"SigLIP\"]\n        C[Vision&lt;br/&gt;Transformer]\n        D[Patch&lt;br/&gt;Embedding]\n        E[Mean&lt;br/&gt;Pooling]\n    end\n\n    subgraph Output\n        F[768-dim&lt;br/&gt;Feature Vector]\n    end\n\n    A --&gt; B\n    B --&gt; C\n    C --&gt; D\n    D --&gt; E\n    E --&gt; F</code></pre>"},{"location":"classification/siglip/#jersey-roi-extraction","title":"Jersey ROI Extraction","text":""},{"location":"classification/siglip/#neden-sadece-forma","title":"Neden Sadece Forma?","text":"<p>Tam v\u00fccut g\u00f6r\u00fcnt\u00fcs\u00fc yerine sadece forma b\u00f6lgesi kullan\u0131l\u0131r:</p> <pre><code>Player Crop          Jersey ROI\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \n\u2502    Head     \u2502      \u2190 \u0130gnore: Sa\u00e7/y\u00fcz farkl\u0131l\u0131klar\u0131\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502             \u2502      \u2502             \u2502\n\u2502   Jersey    \u2502  \u2192   \u2502   Jersey    \u2502  \u2190 Kullan\u0131lan B\u00f6lge\n\u2502             \u2502      \u2502             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2502    Legs     \u2502      \u2190 \u0130gnore: \u015eort benzerli\u011fi\n\u2502             \u2502\n\u2502    Feet     \u2502      \u2190 \u0130gnore: Ayakkab\u0131 benzerli\u011fi\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"classification/siglip/#roi-hesaplama","title":"ROI Hesaplama","text":"<pre><code>def extract_jersey_roi(crop):\n    h, w = crop.shape[:2]\n\n    # Dikey: %20 - %50 aras\u0131 (\u00fcst g\u00f6vde)\n    y_start = int(h * 0.20)\n    y_end = int(h * 0.50)\n\n    # Yatay: %25 - %75 aras\u0131 (merkezde)\n    x_start = int(w * 0.25)\n    x_end = int(w * 0.75)\n\n    return crop[y_start:y_end, x_start:x_end]\n</code></pre> <p>Oranlar Nas\u0131l Belirlendi?</p> <p>Bu oranlar ampirik olarak belirlendi:</p> <ul> <li>%20 \u00fcst: Kafa ve boyun b\u00f6lgesini atla</li> <li>%50 alt: \u015eort s\u0131n\u0131r\u0131na kadar al</li> <li>%25-%75 yatay: Kollar\u0131 minimize et</li> </ul>"},{"location":"classification/siglip/#embedding-extraction","title":"Embedding Extraction","text":""},{"location":"classification/siglip/#kod-implementasyonu","title":"Kod \u0130mplementasyonu","text":"<pre><code>class ProfessionalTeamClassifier:\n    def __init__(self, device='cuda'):\n        self.device = device\n\n        # SigLIP model ve processor y\u00fckle\n        self.processor = AutoProcessor.from_pretrained(\n            'google/siglip-base-patch16-224'\n        )\n        self.model = SiglipVisionModel.from_pretrained(\n            'google/siglip-base-patch16-224'\n        ).to(self.device)\n\n    @torch.no_grad()\n    def extract_jersey_embeddings(self, crops: list) -&gt; np.ndarray:\n        \"\"\"\n        Forma g\u00f6r\u00fcnt\u00fclerinden feature vector \u00e7\u0131kar\u0131r.\n\n        Args:\n            crops: List of BGR images (player crops)\n\n        Returns:\n            np.ndarray: Shape (N, 768)\n        \"\"\"\n        if not crops: \n            return np.array([])\n\n        # ROI extraction\n        jersey_crops = []\n        for c in crops:\n            h, w = c.shape[:2]\n            y_start, y_end = int(h * 0.20), int(h * 0.50)\n            x_start, x_end = int(w * 0.25), int(w * 0.75)\n\n            roi = c[y_start:y_end, x_start:x_end]\n            jersey_crops.append(roi if roi.size &gt; 0 else c)\n\n        # SigLIP preprocessing\n        inputs = self.processor(\n            images=jersey_crops, \n            return_tensors=\"pt\"\n        ).to(self.device)\n\n        # Forward pass\n        outputs = self.model(**inputs)\n\n        # Mean pooling over patch tokens\n        embeddings = torch.mean(\n            outputs.last_hidden_state, \n            dim=1\n        ).cpu().numpy()\n\n        return embeddings\n</code></pre>"},{"location":"classification/siglip/#vision-transformer-isleyisi","title":"Vision Transformer \u0130\u015fleyi\u015fi","text":"<pre><code>flowchart TD\n    subgraph Input[\"Input Processing\"]\n        A[224\u00d7224 Image] --&gt; B[16\u00d716 Patches&lt;br/&gt;196 patches]\n    end\n\n    subgraph Embedding[\"Patch Embedding\"]\n        B --&gt; C[Linear Projection&lt;br/&gt;768-dim per patch]\n        C --&gt; D[+ Position&lt;br/&gt;Embedding]\n        D --&gt; E[+ CLS Token]\n    end\n\n    subgraph Transformer[\"ViT Blocks \u00d712\"]\n        E --&gt; F[Multi-Head&lt;br/&gt;Self-Attention]\n        F --&gt; G[Feed-Forward&lt;br/&gt;Network]\n        G --&gt; H[Layer Norm]\n    end\n\n    subgraph Output[\"Output\"]\n        H --&gt; I[197 \u00d7 768&lt;br/&gt;Token Features]\n        I --&gt; J[Mean Pooling]\n        J --&gt; K[768-dim&lt;br/&gt;Final Embedding]\n    end</code></pre>"},{"location":"classification/siglip/#embedding-ozellikleri","title":"Embedding \u00d6zellikleri","text":""},{"location":"classification/siglip/#ozellik-vektoru-yaps","title":"\u00d6zellik Vekt\u00f6r\u00fc Yap\u0131s\u0131","text":"<pre><code>embedding.shape  # (768,)\n\n# Her bir boyut semantik bilgi ta\u015f\u0131r:\n# - Renk tonlar\u0131\n# - Desen yap\u0131s\u0131  \n# - Logo/sponsor g\u00f6r\u00fcn\u00fcm\u00fc\n# - Kuma\u015f dokusu\n# - vs.\n</code></pre>"},{"location":"classification/siglip/#embedding-uzaynda-benzerlik","title":"Embedding Uzay\u0131nda Benzerlik","text":"<p>Ayn\u0131 tak\u0131mdan oyuncular embedding uzay\u0131nda yak\u0131n olur:</p> \\[ \\text{sim}(\\mathbf{e}_1, \\mathbf{e}_2) = \\frac{\\mathbf{e}_1 \\cdot \\mathbf{e}_2}{\\|\\mathbf{e}_1\\| \\|\\mathbf{e}_2\\|} \\] <pre><code>Embedding Space (768-dim \u2192 2D PCA)\n\n    Team A               Team B\n    \u25cb \u25cb                    \u25cf \u25cf\n   \u25cb \u25cb \u25cb                  \u25cf \u25cf \u25cf\n    \u25cb \u25cb                    \u25cf \u25cf\n</code></pre>"},{"location":"classification/siglip/#inference-mode","title":"Inference Mode","text":"<p>Dikkat: <code>@torch.no_grad()</code></p> <p>Embedding extraction s\u0131ras\u0131nda gradient hesaplanmamal\u0131d\u0131r:</p> <ul> <li>Memory tasarrufu sa\u011flar</li> <li>~%30 daha h\u0131zl\u0131 inference</li> <li>Model weights de\u011fi\u015fmez</li> </ul> <pre><code>@torch.no_grad()  # Kritik decorator\ndef extract_jersey_embeddings(self, crops):\n    # ...\n</code></pre>"},{"location":"classification/siglip/#batch-processing","title":"Batch Processing","text":""},{"location":"classification/siglip/#neden-batch","title":"Neden Batch?","text":"<p>Tek tek g\u00f6r\u00fcnt\u00fc i\u015flemek yerine batch halinde i\u015flemek GPU'yu verimli kullan\u0131r:</p> Yakla\u015f\u0131m GPU Utilization S\u00fcre (30 player) Tek tek ~20% 450ms Batch ~85% 65ms <pre><code># \u274c Yava\u015f\nfor crop in crops:\n    embedding = model(crop)\n\n# \u2705 H\u0131zl\u0131\nembeddings = model(batch_of_crops)  # Single forward pass\n</code></pre>"},{"location":"classification/siglip/#memory-yonetimi","title":"Memory Y\u00f6netimi","text":""},{"location":"classification/siglip/#gpu-memory-tahmini","title":"GPU Memory Tahmini","text":"<pre><code># Per batch memory:\n# - Input: 30 \u00d7 3 \u00d7 224 \u00d7 224 \u00d7 4 bytes = ~18 MB\n# - Model weights: ~344 MB (FP32) / ~172 MB (FP16)\n# - Activations: ~200 MB (peak)\n# Total: ~400-600 MB per batch\n</code></pre>"},{"location":"classification/siglip/#fp16-inference","title":"FP16 Inference","text":"<pre><code># Half precision i\u00e7in\nmodel = model.half()\ninputs = inputs.half()\n\n# memory tasarrufu\n# h\u0131z art\u0131\u015f\u0131\n</code></pre>"},{"location":"classification/siglip/#hata-durumlar","title":"Hata Durumlar\u0131","text":""},{"location":"classification/siglip/#bos-crop","title":"Bo\u015f Crop","text":"<pre><code>if not crops:\n    return np.array([])\n</code></pre>"},{"location":"classification/siglip/#cok-kucuk-roi","title":"\u00c7ok K\u00fc\u00e7\u00fck ROI","text":"<pre><code>roi = c[y_start:y_end, x_start:x_end]\nif roi.size == 0:\n    # Fallback: T\u00fcm crop'u kullan\n    jersey_crops.append(c)\nelse:\n    jersey_crops.append(roi)\n</code></pre>"},{"location":"classification/siglip/#gpu-out-of-memory","title":"GPU Out of Memory","text":"<pre><code>try:\n    embeddings = model(**inputs)\nexcept RuntimeError as e:\n    if \"out of memory\" in str(e):\n        # Batch'i k\u00fc\u00e7\u00fclt\n        torch.cuda.empty_cache()\n        # Smaller batch...\n</code></pre>"},{"location":"classification/siglip/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>UMAP &amp; K-Means - Embedding'leri k\u00fcmeleme</li> <li>Vuru\u015f Alg\u0131lama</li> </ul>"},{"location":"cv/model-training/","title":"Model E\u011fitimi","text":""},{"location":"cv/model-training/#model-egitimi-ve-dataset","title":"Model E\u011fitimi ve Dataset","text":""},{"location":"cv/model-training/#veri-kaynaklar","title":"Veri Kaynaklar\u0131","text":"<p>Bu projede kullan\u0131lan modeller, a\u015fa\u011f\u0131daki a\u00e7\u0131k kaynak veri setleri \u00fczerinde e\u011fitilmi\u015ftir:</p>"},{"location":"cv/model-training/#soccernet","title":"SoccerNet","text":"<p>SoccerNet Dataset</p> <p>SoccerNet, futbol video analizi i\u00e7in en kapsaml\u0131 a\u00e7\u0131k kaynak veri setidir.</p> <ul> <li>500+ ma\u00e7 videosu</li> <li>300K+ annotated frame</li> <li>Action spotting, tracking, calibration g\u00f6revleri</li> </ul> <p>Kullan\u0131m Alan\u0131: Saha keypoint tespiti modeli</p>"},{"location":"cv/model-training/#roboflow-football-dataset","title":"Roboflow Football Dataset","text":"Dataset G\u00f6r\u00fcnt\u00fc Say\u0131s\u0131 S\u0131n\u0131flar Football Players Detection 12,000 player, goalkeeper, referee Football Ball Detection 8,500 ball"},{"location":"cv/model-training/#yolov8-egitim-pipeline","title":"YOLOv8 E\u011fitim Pipeline","text":""},{"location":"cv/model-training/#1-veri-hazrlama","title":"1. Veri Haz\u0131rlama","text":"<pre><code># data.yaml\npath: /data/football\ntrain: images/train\nval: images/val\n\nnames:\n  0: player\n  1: goalkeeper\n  2: ball\n  3: referee\n</code></pre>"},{"location":"cv/model-training/#2-model-egitimi","title":"2. Model E\u011fitimi","text":"<pre><code>from ultralytics import YOLO\n\n# Pretrained model y\u00fckle\nmodel = YOLO('yolov8m.pt')\n\n# Fine-tune\nresults = model.train(\n    data='data.yaml',\n    epochs=100,\n    imgsz=1280,\n    batch=16,\n    device='cuda',\n\n    # Augmentation\n    augment=True,\n    mosaic=1.0,\n    mixup=0.1,\n\n    # Learning Rate\n    lr0=0.01,\n    lrf=0.01,\n\n    # Early Stopping\n    patience=20\n)\n</code></pre>"},{"location":"cv/model-training/#3-pose-model-saha-keypoints","title":"3. Pose Model (Saha Keypoints)","text":"<pre><code># YOLOv8-Pose i\u00e7in \u00f6zel konfig\u00fcrasyon\nmodel = YOLO('yolov8m-pose.pt')\n\nresults = model.train(\n    data='field_keypoints.yaml',\n    epochs=150,\n    imgsz=1280,\n\n    # Pose-specific\n    kpt_shape=[32, 2],  # 32 nokta, 2D koordinat\n)\n</code></pre>"},{"location":"cv/model-training/#data-augmentation-stratejisi","title":"Data Augmentation Stratejisi","text":""},{"location":"cv/model-training/#geometric-transforms","title":"Geometric Transforms","text":"<pre><code>augmentations = {\n    'hsv_h': 0.015,      # Hue shift\n    'hsv_s': 0.7,        # Saturation\n    'hsv_v': 0.4,        # Value\n    'degrees': 5.0,      # Rotation\n    'translate': 0.1,    # Translation\n    'scale': 0.5,        # Scale\n    'shear': 2.0,        # Shear\n    'perspective': 0.001, # Perspective\n    'flipud': 0.0,       # Vertical flip (kapal\u0131)\n    'fliplr': 0.5,       # Horizontal flip\n}\n</code></pre> <p>Dikkat: Flip Augmentation</p> <p>Saha keypoint modeli i\u00e7in vertical flip kapat\u0131lmal\u0131d\u0131r. Aksi halde sol-sa\u011f simetri bozulur ve keypoint e\u015fle\u015fmeleri yanl\u0131\u015f olur.</p>"},{"location":"cv/model-training/#mosaic-mixup","title":"Mosaic &amp; MixUp","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Image 1 \u2502 Image 2 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524    \u2192    Combined Training Sample\n\u2502 Image 3 \u2502 Image 4 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Mosaic augmentation, model'in: - Farkl\u0131 \u00f6l\u00e7eklerde nesneleri \u00f6\u011frenmesini sa\u011flar - K\u00fc\u00e7\u00fck batch size ile \u00e7e\u015fitlilik kazand\u0131r\u0131r - Batch normalization istatistiklerini iyile\u015ftirir</p>"},{"location":"cv/model-training/#transfer-learning-yaklasm","title":"Transfer Learning Yakla\u015f\u0131m\u0131","text":""},{"location":"cv/model-training/#neden-transfer-learning","title":"Neden Transfer Learning?","text":"<ol> <li>Veri K\u0131tl\u0131\u011f\u0131: Futbol spesifik veri s\u0131n\u0131rl\u0131</li> <li>Hesaplama Maliyeti: S\u0131f\u0131rdan e\u011fitim pahal\u0131</li> <li>Feature Reuse: Genel g\u00f6rsel \u00f6zellikler transfer edilebilir</li> </ol>"},{"location":"cv/model-training/#strateji","title":"Strateji","text":"<pre><code>flowchart LR\n    A[COCO Pretrained&lt;br/&gt;YOLOv8] --&gt; B[Freeze&lt;br/&gt;Backbone]\n    B --&gt; C[Train&lt;br/&gt;Head Only]\n    C --&gt; D[Unfreeze&lt;br/&gt;Last Layers]\n    D --&gt; E[Fine-tune&lt;br/&gt;Full Model]</code></pre> <pre><code># A\u015fama 1: Sadece head e\u011fit\nmodel = YOLO('yolov8m.pt')\nfor param in model.model.model[:10].parameters():\n    param.requires_grad = False\n\nmodel.train(epochs=50)\n\n# A\u015fama 2: T\u00fcm modeli fine-tune\nfor param in model.model.parameters():\n    param.requires_grad = True\n\nmodel.train(epochs=50, lr0=0.001)  # D\u00fc\u015f\u00fck LR\n</code></pre>"},{"location":"cv/model-training/#degerlendirme-metrikleri","title":"De\u011ferlendirme Metrikleri","text":""},{"location":"cv/model-training/#object-detection","title":"Object Detection","text":"Metrik Form\u00fcl De\u011fer mAP@0.5 Mean Average Precision @ IoU 0.5 0.912 mAP@0.5:0.95 Mean AP across IoU thresholds 0.743 Precision TP / (TP + FP) 0.891 Recall TP / (TP + FN) 0.867"},{"location":"cv/model-training/#keypoint-detection","title":"Keypoint Detection","text":"Metrik A\u00e7\u0131klama De\u011fer OKS Object Keypoint Similarity 0.834 PCK@0.1 Percentage of Correct Keypoints 0.891"},{"location":"cv/model-training/#confusion-matrix","title":"Confusion Matrix","text":"<pre><code>              Predicted\n              Player  GK   Referee\nActual Player   892    12     8\n       GK        15   156     3\n       Referee    7     2   189\n</code></pre>"},{"location":"cv/model-training/#model-export","title":"Model Export","text":""},{"location":"cv/model-training/#onnx-export","title":"ONNX Export","text":"<pre><code>model.export(format='onnx', dynamic=True, simplify=True)\n</code></pre>"},{"location":"cv/model-training/#tensorrt-production","title":"TensorRT (Production)","text":"<pre><code>model.export(format='engine', half=True, device=0)\n</code></pre> <p>TensorRT, NVIDIA GPU'larda 2-3x h\u0131zlanma sa\u011flar.</p>"},{"location":"cv/model-training/#bilinen-snrlamalar","title":"Bilinen S\u0131n\u0131rlamalar","text":"<p>Edge Cases</p> <ol> <li>Kalabal\u0131k Alanlar: \u00c7ak\u0131\u015fan oyuncularda tespit d\u00fc\u015fer</li> <li>D\u00fc\u015f\u00fck I\u015f\u0131k: Gece ma\u00e7lar\u0131nda g\u00fcven skorlar\u0131 azal\u0131r</li> <li>Uzak Kamera: Geni\u015f a\u00e7\u0131 \u00e7ekimlerde top kaybedilebilir</li> <li>H\u0131zl\u0131 Hareket: Motion blur'da tespit zorla\u015f\u0131r</li> </ol>"},{"location":"cv/model-training/#cozum-onerileri","title":"\u00c7\u00f6z\u00fcm \u00d6nerileri","text":"Problem \u00c7\u00f6z\u00fcm \u00c7ak\u0131\u015fma IoU-based re-verification D\u00fc\u015f\u00fck \u0131\u015f\u0131k Histogram equalization Uzak \u00e7ekim Multi-scale inference Motion blur Deblur preprocessing"},{"location":"cv/model-training/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>Homografi D\u00f6n\u00fc\u015f\u00fcm\u00fc</li> <li>Koordinat Sistemleri</li> </ul>"},{"location":"cv/yolo-pipeline/","title":"YOLOv8 Pipeline","text":""},{"location":"cv/yolo-pipeline/#yolov8-pipeline","title":"YOLOv8 Pipeline","text":""},{"location":"cv/yolo-pipeline/#genel-baks","title":"Genel Bak\u0131\u015f","text":"<p>Bu sistem, \u00fc\u00e7 ayr\u0131 YOLOv8 modeli kullanarak saha, oyuncu ve top tespiti yapar. Her model \u00f6zel bir g\u00f6rev i\u00e7in optimize edilmi\u015ftir.</p> <pre><code>flowchart TB\n    subgraph Input\n        Frame[Video Frame&lt;br/&gt;1920\u00d71080]\n    end\n\n    subgraph Models[\"YOLOv8 Models\"]\n        F[football-field-detection.pt&lt;br/&gt;YOLOv8-Pose]\n        P[football-players-detection.pt&lt;br/&gt;YOLOv8 + ByteTrack]\n        B[football-ball-detection.pt&lt;br/&gt;YOLOv8]\n    end\n\n    subgraph Output[\"Model Outputs\"]\n        FK[32 Field Keypoints&lt;br/&gt;+ Confidence Scores]\n        PD[Player Bounding Boxes&lt;br/&gt;+ Track IDs + Class IDs]\n        BD[Ball Bounding Box&lt;br/&gt;+ Center Coordinate]\n    end\n\n    Frame --&gt; F &amp; P &amp; B\n    F --&gt; FK\n    P --&gt; PD\n    B --&gt; BD</code></pre>"},{"location":"cv/yolo-pipeline/#model-1-saha-keypoint-tespiti","title":"Model 1: Saha Keypoint Tespiti","text":""},{"location":"cv/yolo-pipeline/#model-detaylar","title":"Model Detaylar\u0131","text":"\u00d6zellik De\u011fer Mimari YOLOv8-Pose G\u00f6rev Keypoint Detection \u00c7\u0131kt\u0131 32 nokta + g\u00fcven skorlar\u0131 G\u00fcven E\u015fi\u011fi 0.5"},{"location":"cv/yolo-pipeline/#32-fifa-keypoint-standard","title":"32 FIFA Keypoint Standard\u0131","text":"<p>Model, SoccerNet/FIFA standard\u0131na uygun 32 anahtar noktay\u0131 tespit eder. A\u015fa\u011f\u0131daki g\u00f6rsel, ger\u00e7ek bir ma\u00e7 g\u00f6r\u00fcnt\u00fcs\u00fc \u00fczerinde tespit edilen keypoint'leri g\u00f6stermektedir:</p> <p></p> <p>Keypoint Renk Kodlar\u0131</p> <ul> <li>Ye\u015fil noktalar: Y\u00fcksek g\u00fcvenle tespit edilen keypoint'ler (conf &gt; 0.6)</li> <li>K\u0131rm\u0131z\u0131 numaralar: Keypoint ID'leri (0-31 aras\u0131)</li> <li>G\u00f6r\u00fcnt\u00fcde ceza sahas\u0131 k\u00f6\u015feleri, orta saha \u00e7izgisi ve kale alan\u0131 noktalar\u0131 net \u015fekilde tespit edilmi\u015ftir.</li> </ul>"},{"location":"cv/yolo-pipeline/#keypoint-metre-mapping","title":"Keypoint \u2192 Metre Mapping","text":"<pre><code>PITCH_KEYPOINTS = {\n    0: [0, 0],           # Sol \u00fcst k\u00f6\u015fe\n    5: [0, 68],          # Sol alt k\u00f6\u015fe\n    13: [52.5, 0],       # Orta saha (\u00fcst)\n    16: [52.5, 68],      # Orta saha (alt)\n    24: [105, 0],        # Sa\u011f \u00fcst k\u00f6\u015fe\n    29: [105, 68],       # Sa\u011f alt k\u00f6\u015fe\n    # Ceza sahas\u0131 noktalar\u0131\n    9: [16.5, 13.85],    # Sol ceza sahas\u0131 \u00fcst\n    12: [16.5, 54.15],   # Sol ceza sahas\u0131 alt\n    17: [88.5, 13.85],   # Sa\u011f ceza sahas\u0131 \u00fcst\n    20: [88.5, 54.15],   # Sa\u011f ceza sahas\u0131 alt\n    # Kale alan\u0131 noktalar\u0131\n    6: [5.5, 24.85],\n    7: [5.5, 43.15],\n    22: [99.5, 24.85],\n    23: [99.5, 43.15],\n    # ... toplam 32 nokta\n}\n</code></pre>"},{"location":"cv/yolo-pipeline/#inference-kodu","title":"Inference Kodu","text":"<pre><code>def predict_field(self, frame) -&gt; Any:\n    if self.field_model is None: \n        return None\n\n    return self.field_model.predict(\n        frame, \n        verbose=False, \n        device=self.device, \n        conf=0.5,           # Minimum g\u00fcven\n        half=True           # FP16 precision\n    )[0]\n</code></pre>"},{"location":"cv/yolo-pipeline/#ckt-kullanm","title":"\u00c7\u0131kt\u0131 Kullan\u0131m\u0131","text":"<pre><code>result = engine.predict_field(frame)\n\n# Keypoint koordinatlar\u0131 (piksel)\nkeypoints = result.keypoints.xy[0].cpu().numpy()  # Shape: (32, 2)\n\n# G\u00fcven skorlar\u0131\nconfidences = result.keypoints.conf[0].cpu().numpy()  # Shape: (32,)\n\n# Y\u00fcksek g\u00fcvenli noktalar\u0131 filtrele\nvalid_mask = confidences &gt; 0.6\nvalid_keypoints = keypoints[valid_mask]\n</code></pre>"},{"location":"cv/yolo-pipeline/#model-2-oyuncu-tespiti-ve-takibi","title":"Model 2: Oyuncu Tespiti ve Takibi","text":""},{"location":"cv/yolo-pipeline/#model-detaylar_1","title":"Model Detaylar\u0131","text":"\u00d6zellik De\u011fer Mimari YOLOv8 G\u00f6rev Object Detection + Tracking Tracker ByteTrack S\u0131n\u0131flar player(0), goalkeeper(1), referee(3) G\u00fcven E\u015fi\u011fi 0.4"},{"location":"cv/yolo-pipeline/#bytetrack-entegrasyonu","title":"ByteTrack Entegrasyonu","text":"<p>Neden Tracking?</p> <p>Ofsayt tespiti i\u00e7in her oyuncunun frame'ler aras\u0131 tutarl\u0131 ID'ye sahip olmas\u0131 kritiktir. Tracking olmadan:</p> <ul> <li>Tak\u0131m tahminleri her frame'de s\u0131f\u0131rdan yap\u0131l\u0131r</li> <li>Temporal voting \u00e7al\u0131\u015fmaz</li> <li>Oyuncu hareketleri takip edilemez</li> </ul> <pre><code>def predict_players(self, frame, conf: float = 0.4) -&gt; Any:\n    if self.player_model is None: \n        return None\n\n    # Track modunda \u00e7al\u0131\u015ft\u0131r - persist=True ID korunumu sa\u011flar\n    return self.player_model.track(\n        frame, \n        persist=True,       # ID'leri koru\n        verbose=False, \n        device=self.device, \n        conf=conf,\n        half=True\n    )[0]\n</code></pre>"},{"location":"cv/yolo-pipeline/#ckt-yaps","title":"\u00c7\u0131kt\u0131 Yap\u0131s\u0131","text":"<pre><code>result = engine.predict_players(frame)\n\n# Bounding box'lar [x1, y1, x2, y2]\nboxes = result.boxes.xyxy.int().cpu().tolist()\n\n# Track ID'leri (ByteTrack taraf\u0131ndan atan\u0131r)\ntrack_ids = result.boxes.id.int().cpu().tolist()\n\n# S\u0131n\u0131f ID'leri\nclass_ids = result.boxes.cls.int().cpu().tolist()\n# 0 = player, 1 = goalkeeper, 3 = referee\n</code></pre>"},{"location":"cv/yolo-pipeline/#hakem-filtreleme","title":"Hakem Filtreleme","text":"<pre><code>for tid, cid, box in zip(track_ids, class_ids, boxes):\n    if cid == 3:  # Hakem\n        continue  # Ofsayt hesab\u0131na dahil etme\n</code></pre>"},{"location":"cv/yolo-pipeline/#model-3-top-tespiti","title":"Model 3: Top Tespiti","text":""},{"location":"cv/yolo-pipeline/#model-detaylar_2","title":"Model Detaylar\u0131","text":"\u00d6zellik De\u011fer Mimari YOLOv8 G\u00f6rev Object Detection G\u00fcven E\u015fi\u011fi 0.3 (d\u00fc\u015f\u00fck, \u00e7\u00fcnk\u00fc top k\u00fc\u00e7\u00fck) \u00d6zel Zorluk K\u00fc\u00e7\u00fck nesne, h\u0131zl\u0131 hareket"},{"location":"cv/yolo-pipeline/#tasarm-karar-track-vs-detect","title":"Tasar\u0131m Karar\u0131: Track vs Detect","text":"<p>Neden Tracking Kullanm\u0131yoruz?</p> <p>Top i\u00e7in tracking yerine detection tercih edilir \u00e7\u00fcnk\u00fc:</p> <ol> <li>Top \u00e7ok h\u0131zl\u0131 hareket eder \u2192 tracker kaybedebilir</li> <li>Top s\u0131k s\u0131k g\u00f6r\u00fcnt\u00fcden \u00e7\u0131kar \u2192 ID kar\u0131\u015f\u0131r</li> <li>Her frame'de tek top oldu\u011fu varsay\u0131l\u0131r \u2192 ID'ye gerek yok</li> </ol> <pre><code>def predict_ball(self, frame) -&gt; Any:\n    if self.ball_model is None: \n        return None\n\n    # Predict modunda \u00e7al\u0131\u015ft\u0131r (track de\u011fil)\n    return self.ball_model.predict(\n        frame, \n        verbose=False, \n        device=self.device, \n        conf=0.3,      # D\u00fc\u015f\u00fck e\u015fik\n        half=True\n    )[0]\n</code></pre>"},{"location":"cv/yolo-pipeline/#top-merkezi-hesaplama","title":"Top Merkezi Hesaplama","text":"<pre><code>if len(b_res.boxes) &gt; 0:\n    bx = b_res.boxes[0].xyxy[0].cpu().numpy()\n\n    # Bounding box merkezini al\n    ball_center_pixel = np.array([\n        (bx[0] + bx[2]) / 2,  # X merkezi\n        bx[3]                  # Y alt (ayak seviyesi)\n    ])\n\n    # Metre koordinat\u0131na d\u00f6n\u00fc\u015ft\u00fcr\n    ball_meter = geometry.pixel_to_pitch(ball_center_pixel)\n</code></pre> <p>Neden <code>bx[3]</code> (Alt Kenar)?</p> <p>Top i\u00e7in Y koordinat\u0131 olarak alt kenar kullan\u0131l\u0131r. Bunun nedeni, homografi d\u00f6n\u00fc\u015f\u00fcm\u00fcn\u00fcn zemin d\u00fczleminde \u00e7al\u0131\u015fmas\u0131d\u0131r. Topun zemine temas noktas\u0131, metrik koordinat i\u00e7in en do\u011fru referanst\u0131r.</p>"},{"location":"cv/yolo-pipeline/#fp16-half-precision-optimizasyonu","title":"FP16 (Half Precision) Optimizasyonu","text":"<p>T\u00fcm modeller FP16 modunda \u00e7al\u0131\u015ft\u0131r\u0131l\u0131r:</p> <pre><code>model.predict(..., half=True)\n</code></pre>"},{"location":"cv/yolo-pipeline/#faydalar","title":"Faydalar\u0131","text":"Metrik FP32 FP16 \u0130yile\u015fme VRAM Kullan\u0131m\u0131 ~6 GB ~3 GB %50 Inference S\u00fcresi 42ms 28ms %33 Accuracy Loss - ~0.1% Kabul edilebilir"},{"location":"cv/yolo-pipeline/#hata-yonetimi-error-handling","title":"Hata Y\u00f6netimi (Error Handling)","text":""},{"location":"cv/yolo-pipeline/#model-yukleme-hatas","title":"Model Y\u00fckleme Hatas\u0131","text":"<pre><code>def _load_model(self, path: Optional[str], task: str) -&gt; Optional[YOLO]:\n    if not path or path == '':\n        return None\n\n    try:\n        model = YOLO(path, task=task)\n        model.to(self.device)\n        return model\n    except Exception as e:\n        print(f\"[ERROR] Model y\u00fcklenemedi ({path}): {e}\")\n        return None\n</code></pre>"},{"location":"cv/yolo-pipeline/#tespit-yoksa","title":"Tespit Yoksa","text":"<pre><code># Saha tespiti ba\u015far\u0131s\u0131zsa homografi g\u00fcncellenmez\nif f_res.keypoints is not None:\n    geometry.solve_from_model(...)\n\n# Top bulunamazsa None d\u00f6ner\nball_m = None\nif len(b_res.boxes) &gt; 0:\n    # ...\n</code></pre>"},{"location":"cv/yolo-pipeline/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>Model E\u011fitimi - Custom dataset ve fine-tuning</li> <li>Homografi Matemati\u011fi - Keypoint'lerden d\u00f6n\u00fc\u015f\u00fcm</li> </ul>"},{"location":"geometry/coordinates/","title":"Koordinat Sistemleri","text":""},{"location":"geometry/coordinates/#koordinat-sistemleri","title":"Koordinat Sistemleri","text":""},{"location":"geometry/coordinates/#iki-koordinat-dunyas","title":"\u0130ki Koordinat D\u00fcnyas\u0131","text":"<p>Bu sistemde iki farkl\u0131 koordinat sistemi kullan\u0131l\u0131r ve s\u00fcrekli aralar\u0131nda d\u00f6n\u00fc\u015f\u00fcm yap\u0131l\u0131r:</p> Sistem Birim Orijin Kullan\u0131m Piksel px Sol \u00fcst k\u00f6\u015fe (0, 0) G\u00f6r\u00fcnt\u00fc i\u015fleme, UI Metrik metre Sol \u00fcst k\u00f6\u015fe (0, 0) Fiziksel hesaplamalar <pre><code>Piksel Koordinat Sistemi         Metrik Koordinat Sistemi\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500        \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n(0,0)\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192 U            (0,0)\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192 X\n\u2502                                \u2502\n\u2502     G\u00f6r\u00fcnt\u00fc                    \u2502     Saha\n\u2502     1920 \u00d7 1080                \u2502     105m \u00d7 68m\n\u2502                                \u2502\n\u2193                                \u2193\nV                                Y\n</code></pre>"},{"location":"geometry/coordinates/#fifa-standart-saha-olculeri","title":"FIFA Standart Saha \u00d6l\u00e7\u00fcleri","text":"<p>T\u00fcm metrik hesaplamalar FIFA standart \u00f6l\u00e7\u00fcleri baz al\u0131r:</p> <pre><code>                        105 metre\n    \u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192\n\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2191\n    \u2502                                               \u2502  \u2502\n    \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\n    \u2502  \u2502         \u2502                     \u2502         \u2502  \u2502  \u2502\n 16.5m \u2502   \u250c\u2500\u2510   \u2502        \u25cb            \u2502   \u250c\u2500\u2510   \u2502  \u2502  \u2502\n    \u2502  \u2502   \u2502 \u2502   \u2502      r=9.15m        \u2502   \u2502 \u2502   \u2502  \u2502 68m\n    \u2502  \u2502   \u2514\u2500\u2518   \u2502                     \u2502   \u2514\u2500\u2518   \u2502  \u2502  \u2502\n    \u2502  \u2502  5.5m   \u2502                     \u2502  5.5m   \u2502  \u2502  \u2502\n    \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\n    \u2502     40.3m                           40.3m     \u2502  \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2193\n\n    \u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u250052.5m\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192\n                  (orta saha)\n</code></pre>"},{"location":"geometry/coordinates/#kritik-olculer","title":"Kritik \u00d6l\u00e7\u00fcler","text":"Alan Boyut Toplam saha 105m \u00d7 68m Ceza sahas\u0131 40.3m \u00d7 16.5m Kale alan\u0131 18.3m \u00d7 5.5m Penalt\u0131 noktas\u0131 11m (kale \u00e7izgisinden) Orta daire yar\u0131\u00e7ap\u0131 9.15m"},{"location":"geometry/coordinates/#oyuncu-koordinat-donusumu","title":"Oyuncu Koordinat D\u00f6n\u00fc\u015f\u00fcm\u00fc","text":""},{"location":"geometry/coordinates/#bounding-box-zemin-noktas","title":"Bounding Box \u2192 Zemin Noktas\u0131","text":"<p>Oyuncunun saha pozisyonu i\u00e7in bounding box'\u0131n alt orta noktas\u0131 kullan\u0131l\u0131r:</p> <pre><code>     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502         \u2502\n     \u2502  Player \u2502\n     \u2502         \u2502\n     \u2502         \u2502\n     \u2514\u2500\u2500\u2500\u2500\u25cf\u2500\u2500\u2500\u2500\u2518\n          \u2191\n     (x1+x2)/2, y2\n\n     \"Ayak Noktas\u0131\"\n</code></pre> <pre><code># Bounding box: [x1, y1, x2, y2]\nfoot_point = np.array([\n    [(box[0] + box[2]) / 2,  # X: Orta\n     box[3]]                  # Y: Alt kenar\n])\n\n# Metre koordinat\u0131na d\u00f6n\u00fc\u015ft\u00fcr\nplayer_meter = geometry.pixel_to_pitch(foot_point)\n</code></pre> <p>Neden Alt Orta Nokta?</p> <ul> <li>Homografi zemin d\u00fczleminde \u00e7al\u0131\u015f\u0131r</li> <li>Oyuncunun kafa pozisyonu perspektif bozulmas\u0131na maruz kal\u0131r</li> <li>Ayak pozisyonu, sahadaki ger\u00e7ek konumu temsil eder</li> </ul>"},{"location":"geometry/coordinates/#top-koordinat-donusumu","title":"Top Koordinat D\u00f6n\u00fc\u015f\u00fcm\u00fc","text":"<p>Top i\u00e7in de alt kenar kullan\u0131l\u0131r:</p> <pre><code>if len(b_res.boxes) &gt; 0:\n    bx = b_res.boxes[0].xyxy[0].cpu().numpy()\n\n    ball_point = np.array([\n        [(bx[0] + bx[2]) / 2,  # X merkezi\n         bx[3]]                # Y alt (zemine temas)\n    ])\n\n    ball_meter = geometry.pixel_to_pitch(ball_point)\n</code></pre>"},{"location":"geometry/coordinates/#ofsayt-cizgisi-koordinatlar","title":"Ofsayt \u00c7izgisi Koordinatlar\u0131","text":"<p>Ofsayt \u00e7izgisi, sabit X de\u011ferinde dikey bir do\u011frudur:</p>"},{"location":"geometry/coordinates/#metrik-tanm","title":"Metrik Tan\u0131m","text":"<pre><code>X = 68 metre (\u00f6rnek)\n\nY = 0  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  (\u00fcst ta\u00e7 \u00e7izgisi)\n       \u2502\n       \u2502    Ofsayt\n       \u2502    \u00c7izgisi\n       \u2502\nY = 68 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  (alt ta\u00e7 \u00e7izgisi)\n</code></pre>"},{"location":"geometry/coordinates/#piksel-donusumu","title":"Piksel D\u00f6n\u00fc\u015f\u00fcm\u00fc","text":"<pre><code>def get_offside_line(self, x_meter: float):\n    # Sahadaki iki nokta (dikey \u00e7izginin u\u00e7lar\u0131)\n    pitch_points = np.array([\n        [x_meter, 0],           # \u00dcst ta\u00e7 \u00e7izgisi\n        [x_meter, 68]           # Alt ta\u00e7 \u00e7izgisi\n    ])\n\n    # Piksele d\u00f6n\u00fc\u015ft\u00fcr\n    pixel_points = self.pitch_to_pixel(pitch_points)\n\n    return pixel_points\n</code></pre>"},{"location":"geometry/coordinates/#perspektif-etkisi","title":"Perspektif Etkisi","text":"<p>Metrik koordinatta dikey olan \u00e7izgi, piksel koordinat\u0131nda e\u011fik g\u00f6r\u00fcn\u00fcr:</p> <pre><code>Metrik (Ku\u015fbak\u0131\u015f\u0131)           Piksel (Perspektif)\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500            \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n     \u2502                           \u2572\n     \u2502                            \u2572\n     \u2502                             \u2572\n     \u2502                              \u2572\n     \u2502                               \u2572\n</code></pre>"},{"location":"geometry/coordinates/#mesafe-hesaplamalar","title":"Mesafe Hesaplamalar\u0131","text":""},{"location":"geometry/coordinates/#oyuncu-top-mesafesi","title":"Oyuncu-Top Mesafesi","text":"<pre><code>def euclidean_distance(p1, p2):\n    \"\"\"\n    \u0130ki nokta aras\u0131 \u00d6klid mesafesi (metre).\n\n    Args:\n        p1, p2: [x, y] metre koordinatlar\u0131\n    \"\"\"\n    return np.sqrt((p1[0] - p2[0])**2 + (p1[1] - p2[1])**2)\n</code></pre> \\[ d = \\sqrt{(x_1 - x_2)^2 + (y_1 - y_2)^2} \\]"},{"location":"geometry/coordinates/#ofsayt-marj","title":"Ofsayt Marj\u0131","text":"<pre><code># H\u00fccumcu pozisyonu: attacker_x\n# Ofsayt \u00e7izgisi: offside_line_x\n\nmargin = abs(attacker_x - offside_line_x)  # metre cinsinden\n</code></pre>"},{"location":"geometry/coordinates/#koordinat-validasyonu","title":"Koordinat Validasyonu","text":""},{"location":"geometry/coordinates/#saha-snrlar-kontrolu","title":"Saha S\u0131n\u0131rlar\u0131 Kontrol\u00fc","text":"<pre><code>def is_on_pitch(coord: np.ndarray) -&gt; bool:\n    \"\"\"Koordinat\u0131n saha i\u00e7inde olup olmad\u0131\u011f\u0131n\u0131 kontrol eder.\"\"\"\n    x, y = coord\n    return (0 &lt;= x &lt;= 105) and (0 &lt;= y &lt;= 68)\n</code></pre>"},{"location":"geometry/coordinates/#aykr-deger-tespiti","title":"Ayk\u0131r\u0131 De\u011fer Tespiti","text":"<pre><code>def validate_player_position(coord: np.ndarray) -&gt; bool:\n    \"\"\"\n    Fiziksel olarak imkans\u0131z pozisyonlar\u0131 filtreler.\n    \"\"\"\n    x, y = coord\n\n    # Saha d\u0131\u015f\u0131\n    if x &lt; -5 or x &gt; 110 or y &lt; -5 or y &gt; 73:\n        return False\n\n    # Kale arkas\u0131 (sadece kaleci olabilir)\n    if x &lt; 0 or x &gt; 105:\n        return False\n\n    return True\n</code></pre>"},{"location":"geometry/coordinates/#atak-yonu-ve-koordinat-sistemi","title":"Atak Y\u00f6n\u00fc ve Koordinat Sistemi","text":""},{"location":"geometry/coordinates/#l2r-soldan-saga","title":"L2R (Soldan Sa\u011fa)","text":"<pre><code>H\u00fccum Y\u00f6n\u00fc \u2192\n\nSavunma          Ofsayt \u00c7izgisi          H\u00fccum\n   \u25cb\u25cb                  \u2502                   \u25cb\n   \u25cb\u25cb                  \u2502                  \u25cb\u25cb\n                       \u2502\n\nX: 0 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192 X: 105\n</code></pre> <ul> <li>Savunmac\u0131lar: D\u00fc\u015f\u00fck X de\u011ferleri</li> <li>Ofsayt: H\u00fccumcu X &gt; \u00c7izgi X \u2192 OFFSIDE</li> </ul>"},{"location":"geometry/coordinates/#r2l-sagdan-sola","title":"R2L (Sa\u011fdan Sola)","text":"<pre><code>                           \u2190 H\u00fccum Y\u00f6n\u00fc\n\nH\u00fccum          Ofsayt \u00c7izgisi          Savunma\n  \u25cb                    \u2502                   \u25cb\u25cb\n \u25cb\u25cb                    \u2502                   \u25cb\u25cb\n                       \u2502\n\nX: 0 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2192 X: 105\n</code></pre> <ul> <li>Savunmac\u0131lar: Y\u00fcksek X de\u011ferleri</li> <li>Ofsayt: H\u00fccumcu X &lt; \u00c7izgi X \u2192 OFFSIDE</li> </ul>"},{"location":"geometry/coordinates/#koordinat-donusum-performans","title":"Koordinat D\u00f6n\u00fc\u015f\u00fcm Performans\u0131","text":"<p>Vekt\u00f6rizasyon</p> <p>NumPy'nin matris \u00e7arp\u0131m\u0131 kullan\u0131ld\u0131\u011f\u0131 i\u00e7in d\u00f6n\u00fc\u015f\u00fcmler vekt\u00f6rize edilmi\u015ftir. 100 oyuncu i\u00e7in tek bir matris \u00e7arp\u0131m\u0131 yeterlidir.</p>"},{"location":"geometry/coordinates/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>SigLIP Embeddings</li> <li>UMAP &amp; K-Means</li> </ul>"},{"location":"geometry/homography/","title":"Perspektif D\u00f6n\u00fc\u015f\u00fcm\u00fc","text":""},{"location":"geometry/homography/#homografi-ve-perspektif-donusumu","title":"Homografi ve Perspektif D\u00f6n\u00fc\u015f\u00fcm\u00fc","text":""},{"location":"geometry/homography/#temel-kavram","title":"Temel Kavram","text":"<p>Homografi, bir d\u00fczlemdeki noktalar\u0131 ba\u015fka bir d\u00fczleme e\u015fleyen projektif d\u00f6n\u00fc\u015f\u00fcmd\u00fcr. Futbol sahas\u0131nda:</p> <ul> <li>Kaynak D\u00fczlem: Kamera g\u00f6r\u00fcnt\u00fcs\u00fc (piksel)</li> <li>Hedef D\u00fczlem: Ku\u015fbak\u0131\u015f\u0131 saha g\u00f6r\u00fcn\u00fcm\u00fc (metre)</li> </ul> <pre><code>flowchart LR\n    subgraph Camera[\"Kamera G\u00f6r\u00fcnt\u00fcs\u00fc\"]\n        A[Perspektif&lt;br/&gt;Bozulma]\n    end\n\n    subgraph Transform[\"Homografi\"]\n        H[\"H \u2208 \u211d\u00b3\u02e3\u00b3\"]\n    end\n\n    subgraph TopDown[\"Ku\u015fbak\u0131\u015f\u0131\"]\n        B[Metrik&lt;br/&gt;Koordinatlar]\n    end\n\n    A --&gt;|\"p' = Hp\"| H\n    H --&gt; B</code></pre>"},{"location":"geometry/homography/#matematiksel-formulasyon","title":"Matematiksel Form\u00fclasyon","text":""},{"location":"geometry/homography/#homografi-matrisi","title":"Homografi Matrisi","text":"<p>Homografi, 3\u00d73 boyutunda bir matris ile ifade edilir:</p> \\[ \\mathbf{H} = \\begin{bmatrix}  h_{11} &amp; h_{12} &amp; h_{13} \\\\ h_{21} &amp; h_{22} &amp; h_{23} \\\\ h_{31} &amp; h_{32} &amp; h_{33} \\end{bmatrix} \\]"},{"location":"geometry/homography/#donusum-denklemi","title":"D\u00f6n\u00fc\u015f\u00fcm Denklemi","text":"<p>Piksel koordinat\u0131 \\((u, v)\\)'dan metre koordinat\u0131 \\((x, y)\\)'ye d\u00f6n\u00fc\u015f\u00fcm:</p> \\[ \\begin{bmatrix} x' \\\\ y' \\\\ w' \\end{bmatrix} = \\mathbf{H} \\cdot \\begin{bmatrix} u \\\\ v \\\\ 1 \\end{bmatrix} \\] <p>Normalle\u015ftirme:</p> \\[ x = \\frac{x'}{w'}, \\quad y = \\frac{y'}{w'} \\] <p>Homojen Koordinatlar</p> <p>\\(w'\\) bile\u015feni projeksiyon fakt\u00f6r\u00fcd\u00fcr. Normalle\u015ftirme, perspektif etkisini ortadan kald\u0131r\u0131r.</p>"},{"location":"geometry/homography/#ters-donusum","title":"Ters D\u00f6n\u00fc\u015f\u00fcm","text":"<p>Metre \u2192 Piksel d\u00f6n\u00fc\u015f\u00fcm\u00fc i\u00e7in ters matris kullan\u0131l\u0131r:</p> \\[ \\begin{bmatrix} u' \\\\ v' \\\\ w' \\end{bmatrix} = \\mathbf{H}^{-1} \\cdot \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} \\]"},{"location":"geometry/homography/#dlt-direct-linear-transform","title":"DLT (Direct Linear Transform)","text":"<p>Homografi matrisini hesaplamak i\u00e7in en az 4 e\u015fle\u015fen nokta \u00e7ifti gerekir.</p>"},{"location":"geometry/homography/#nokta-eslesmeleri","title":"Nokta E\u015fle\u015fmeleri","text":"<pre><code>Piksel (u, v)     \u2192     Saha (x, y)\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n(120, 80)         \u2192     (0, 0)        # Sol \u00fcst k\u00f6\u015fe\n(1800, 80)        \u2192     (105, 0)      # Sa\u011f \u00fcst k\u00f6\u015fe\n(1850, 1000)      \u2192     (105, 68)     # Sa\u011f alt k\u00f6\u015fe\n(70, 1000)        \u2192     (0, 68)       # Sol alt k\u00f6\u015fe\n</code></pre>"},{"location":"geometry/homography/#dlt-algoritmas","title":"DLT Algoritmas\u0131","text":"<p>Her nokta \u00e7ifti i\u00e7in iki denklem:</p> \\[ \\begin{align} -u \\cdot h_{31} \\cdot x - u \\cdot h_{32} \\cdot y - u \\cdot h_{33} + h_{11} \\cdot x + h_{12} \\cdot y + h_{13} &amp;= 0 \\\\ -v \\cdot h_{31} \\cdot x - v \\cdot h_{32} \\cdot y - v \\cdot h_{33} + h_{21} \\cdot x + h_{22} \\cdot y + h_{23} &amp;= 0 \\end{align} \\] <p>4 nokta \u2192 8 denklem \u2192 8 bilinmeyen (h\u2083\u2083 = 1 normalize edilir)</p>"},{"location":"geometry/homography/#ransac-ile-robust-homografi","title":"RANSAC ile Robust Homografi","text":""},{"location":"geometry/homography/#problem-outlier-keypoints","title":"Problem: Outlier Keypoints","text":"<p>Model her zaman do\u011fru keypoint tespit etmez. Yanl\u0131\u015f e\u015fle\u015fmeler homografiyi bozar.</p> <pre><code>\u2713 Do\u011fru: (120, 80) \u2192 (0, 0)\n\u2713 Do\u011fru: (1800, 80) \u2192 (105, 0)\n\u2717 Yanl\u0131\u015f: (500, 300) \u2192 (52.5, 0)  \u2190 OUTLIER\n\u2713 Do\u011fru: (1850, 1000) \u2192 (105, 68)\n</code></pre>"},{"location":"geometry/homography/#ransac-algoritmas","title":"RANSAC Algoritmas\u0131","text":"<p>RANSAC (Random Sample Consensus), outlier'lar\u0131 otomatik olarak eler:</p> <pre><code>flowchart TD\n    A[T\u00fcm Nokta \u00c7iftleri] --&gt; B{Random 4 Nokta Se\u00e7}\n    B --&gt; C[Homografi Hesapla]\n    C --&gt; D[T\u00fcm Noktalar\u0131 Test Et]\n    D --&gt; E{Inlier Say\u0131s\u0131&lt;br/&gt;Maksimum mu?}\n    E --&gt;|Evet| F[En \u0130yi H'yi Kaydet]\n    E --&gt;|Hay\u0131r| B\n    F --&gt; G{Yeterli \u0130terasyon?}\n    G --&gt;|Hay\u0131r| B\n    G --&gt;|Evet| H[Final Homografi]</code></pre>"},{"location":"geometry/homography/#opencv-implementasyonu","title":"OpenCV Implementasyonu","text":"<pre><code>def calculate_robust_h(self, src_pts, dst_pts):\n    \"\"\"RANSAC ile g\u00fcr\u00fclt\u00fcy\u00fc temizler ve matrisi do\u011frular.\"\"\"\n\n    # RANSAC ile homografi hesapla\n    H, status = cv2.findHomography(\n        src_pts, \n        dst_pts, \n        cv2.RANSAC,     # Metot\n        3.0              # Reproj. error threshold (piksel)\n    )\n\n    if H is None: \n        return None\n\n    # Geometrik Do\u011frulama\n    det = np.linalg.det(H[:2, :2])\n    if abs(det) &lt; 1e-6:  # Sing\u00fcler matris\n        return None\n\n    return H\n</code></pre>"},{"location":"geometry/homography/#ransac-parametreleri","title":"RANSAC Parametreleri","text":"Parametre De\u011fer A\u00e7\u0131klama <code>method</code> RANSAC Robust estimation <code>ransacReprojThreshold</code> 3.0 Max reprojection error (px) <code>maxIters</code> 2000 Maximum iterations <code>confidence</code> 0.995 Desired success probability"},{"location":"geometry/homography/#geometrik-dogrulama","title":"Geometrik Do\u011frulama","text":"<p>Homografi matrisinin ge\u00e7erlili\u011fi kontrol edilmelidir:</p>"},{"location":"geometry/homography/#1-determinant-kontrolu","title":"1. Determinant Kontrol\u00fc","text":"\\[ \\det(\\mathbf{H}_{2 \\times 2}) = h_{11} \\cdot h_{22} - h_{12} \\cdot h_{21} \\] <ul> <li>\\(|\\det| \\approx 0\\) \u2192 Matris sing\u00fcler, ge\u00e7ersiz</li> <li>\\(\\det &lt; 0\\) \u2192 Yans\u0131ma var, muhtemelen hatal\u0131</li> </ul> <pre><code>det = np.linalg.det(H[:2, :2])\nif abs(det) &lt; 1e-6:\n    return None  # Ge\u00e7ersiz matris\n</code></pre>"},{"location":"geometry/homography/#2-condition-number","title":"2. Condition Number","text":"\\[ \\kappa(\\mathbf{H}) = \\|\\mathbf{H}\\| \\cdot \\|\\mathbf{H}^{-1}\\| \\] <p>Y\u00fcksek condition number \u2192 Say\u0131sal karars\u0131zl\u0131k</p> <pre><code>cond = np.linalg.cond(H)\nif cond &gt; 1e6:\n    print(\"[WARNING] Ill-conditioned homography\")\n</code></pre>"},{"location":"geometry/homography/#gorsel-dogrulama-grid-testi","title":"G\u00f6rsel Do\u011frulama: Grid Testi","text":"<p>Homografi matrisinin do\u011frulu\u011funu test etmenin en etkili yolu, metrik koordinatlarda d\u00fczenli bir grid olu\u015fturup bunu g\u00f6r\u00fcnt\u00fcye yans\u0131tmakt\u0131r.</p>"},{"location":"geometry/homography/#test-yontemi","title":"Test Y\u00f6ntemi","text":"<ol> <li>Metrik koordinatlarda sabit aral\u0131kl\u0131 \u00e7izgiler tan\u0131mla (her 10 metre)</li> <li><code>pitch_to_pixel()</code> ile piksel koordinatlar\u0131na d\u00f6n\u00fc\u015ft\u00fcr</li> <li>G\u00f6r\u00fcnt\u00fc \u00fczerine \u00e7iz ve perspektif do\u011frulu\u011funu g\u00f6zlemle</li> </ol> <p>Do\u011frulama Sonucu</p> <p>Yukar\u0131daki g\u00f6r\u00fcnt\u00fcde:</p> <ul> <li>Mavi dikey \u00e7izgiler: Her 10 metrede bir X ekseni \u00e7izgileri (0m, 10m, 20m, ... 105m)</li> <li>Mavi yatay \u00e7izgiler: Sabit Y koordinatlar\u0131nda \u00e7izgiler</li> <li>Ye\u015fil noktalar: Tespit edilen keypoint'ler</li> <li>\"STATUS: NEW MATRIX\": Homografi matrisinin yeni hesapland\u0131\u011f\u0131n\u0131 g\u00f6sterir</li> </ul> <p>\u00c7izgilerin saha \u00e7izgileriyle paralel ve hizal\u0131 olmas\u0131, homografi d\u00f6n\u00fc\u015f\u00fcm\u00fcn\u00fcn do\u011fru \u00e7al\u0131\u015ft\u0131\u011f\u0131n\u0131 kan\u0131tlar.</p>"},{"location":"geometry/homography/#kod-implementasyonu","title":"Kod Implementasyonu","text":""},{"location":"geometry/homography/#geometryengine-snf","title":"GeometryEngine S\u0131n\u0131f\u0131","text":"<pre><code>class GeometryEngine:\n    def __init__(self):\n        self.PITCH_WIDTH = 105.0   # FIFA standart (m)\n        self.PITCH_HEIGHT = 68.0   # FIFA standart (m)\n        self.homography_matrix = None\n        self.h_inv = None\n\n        # 32 FIFA keypoint mapping\n        self.PITCH_KEYPOINTS = {\n            0: [0, 0],      # Sol \u00fcst k\u00f6\u015fe\n            5: [0, 68],     # Sol alt k\u00f6\u015fe\n            13: [52.5, 0],  # Orta saha \u00fcst\n            # ... 32 nokta\n        }\n\n    def solve_from_model(self, kpts, confs) -&gt; bool:\n        \"\"\"Geli\u015fmi\u015f \u00c7\u00f6z\u00fcc\u00fc: Confidence filtering ve Outlier reddetme i\u00e7erir.\"\"\"\n        src_pts, dst_pts = [], []\n\n        CONF_THRESHOLD = 0.6\n\n        for idx, (kp, conf) in enumerate(zip(kpts, confs)):\n            if conf &gt;= CONF_THRESHOLD and idx in self.PITCH_KEYPOINTS:\n                src_pts.append([kp[0], kp[1]])\n                dst_pts.append(self.PITCH_KEYPOINTS[idx])\n\n        if len(src_pts) &gt;= 6:  # Minimum 6 nokta\n            new_h = self.calculate_robust_h(\n                np.array(src_pts), \n                np.array(dst_pts)\n            )\n            if new_h is not None:\n                self.homography_matrix = new_h\n                self.h_inv = np.linalg.inv(new_h)\n                return True\n        return False\n</code></pre>"},{"location":"geometry/homography/#piksel-metre-donusumu","title":"Piksel \u2192 Metre D\u00f6n\u00fc\u015f\u00fcm\u00fc","text":"<pre><code>def pixel_to_pitch(self, points: np.ndarray) -&gt; np.ndarray:\n    \"\"\"\n    Piksel koordinatlar\u0131n\u0131 metre cinsine d\u00f6n\u00fc\u015ft\u00fcr\u00fcr.\n\n    Args:\n        points: Shape (N, 2) - [[u1, v1], [u2, v2], ...]\n\n    Returns:\n        Shape (N, 2) - [[x1, y1], [x2, y2], ...] (metre)\n    \"\"\"\n    if self.homography_matrix is None: \n        return np.array([])\n\n    # Homojen koordinatlara \u00e7evir\n    ones = np.ones((len(points), 1))\n    points_homo = np.concatenate([points, ones], axis=1)\n\n    # D\u00f6n\u00fc\u015f\u00fcm uygula\n    transformed = (self.homography_matrix @ points_homo.T).T\n\n    # Normalle\u015ftir\n    return transformed[:, :2] / transformed[:, 2:3]\n</code></pre>"},{"location":"geometry/homography/#metre-piksel-donusumu","title":"Metre \u2192 Piksel D\u00f6n\u00fc\u015f\u00fcm\u00fc","text":"<pre><code>def pitch_to_pixel(self, points: np.ndarray) -&gt; np.ndarray:\n    \"\"\"Metre koordinatlar\u0131n\u0131 piksele d\u00f6n\u00fc\u015ft\u00fcr\u00fcr.\"\"\"\n    if self.h_inv is None: \n        return np.array([])\n\n    points_homo = np.concatenate([points, np.ones((len(points), 1))], axis=1)\n    transformed = (self.h_inv @ points_homo.T).T\n    return transformed[:, :2] / transformed[:, 2:3]\n</code></pre>"},{"location":"geometry/homography/#ofsayt-cizgisi-cizimi","title":"Ofsayt \u00c7izgisi \u00c7izimi","text":"<p>Ofsayt \u00e7izgisi, sabit X koordinat\u0131nda dikey bir \u00e7izgidir:</p> <pre><code>def get_offside_line(self, offside_x_metric: float) -&gt; List[Tuple[int, int]]:\n    \"\"\"\n    Ofsayt X koordinat\u0131n\u0131 g\u00f6r\u00fcnt\u00fcdeki perspektif \u00e7izgiye \u00e7evirir.\n\n    Args:\n        offside_x_metric: Ofsayt \u00e7izgisi X koordinat\u0131 (metre)\n\n    Returns:\n        [(x1, y1), (x2, y2)] - \u00c7izginin piksel koordinatlar\u0131\n    \"\"\"\n    # Sahadaki dikey \u00e7izgi (X sabit, Y: 0 \u2192 68)\n    pitch_line = np.array([\n        [offside_x_metric, 0],\n        [offside_x_metric, self.PITCH_HEIGHT]\n    ], dtype=np.float32)\n\n    # Piksele d\u00f6n\u00fc\u015ft\u00fcr\n    pixel_line = self.pitch_to_pixel(pitch_line)\n\n    if len(pixel_line) &lt; 2: \n        return []\n\n    return [(int(p[0]), int(p[1])) for p in pixel_line]\n</code></pre>"},{"location":"geometry/homography/#gorsellestirme","title":"G\u00f6rselle\u015ftirme","text":"<pre><code>pts = geometry.get_offside_line(68.0)  # X = 35 metre\n\nif len(pts) == 2:\n    cv2.line(frame, pts[0], pts[1], (0, 255, 255), 2)\n</code></pre>"},{"location":"geometry/homography/#hata-kaynaklar-ve-cozumler","title":"Hata Kaynaklar\u0131 ve \u00c7\u00f6z\u00fcmler","text":"Hata Neden \u00c7\u00f6z\u00fcm Titreyen \u00e7izgi Frame-to-frame keypoint de\u011fi\u015fimi EMA smoothing Kay\u0131k \u00e7izgi Yetersiz keypoint Minimum 6 nokta \u015fart\u0131 \u00c7izgi yok Homografi hesaplanamad\u0131 \u00d6nceki matrisi koru Yanl\u0131\u015f pozisyon Outlier keypoint RANSAC threshold ayarla"},{"location":"geometry/homography/#ema-smoothing","title":"EMA Smoothing","text":"<pre><code># Ani s\u0131\u00e7ramalar\u0131 \u00f6nlemek i\u00e7in\nsmoothed_line = alpha * raw_line + (1 - alpha) * smoothed_line\n# alpha = 0.15 (yava\u015f adaptasyon)\n</code></pre>"},{"location":"geometry/homography/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>Koordinat Sistemleri</li> <li>Tak\u0131m S\u0131n\u0131fland\u0131rma</li> </ul>"},{"location":"kick/kinematics/","title":"Kinematik Analiz","text":""},{"location":"kick/kinematics/#kinematik-vurus-alglama","title":"Kinematik Vuru\u015f Alg\u0131lama","text":""},{"location":"kick/kinematics/#problem-tanm","title":"Problem Tan\u0131m\u0131","text":"<p>Ofsayt karar\u0131 topun oynanma an\u0131nda verilmelidir. Bu nedenle, vuru\u015f an\u0131n\u0131 do\u011fru tespit etmek kritiktir.</p> <p>Yanl\u0131\u015f Vuru\u015f Tespiti Sonu\u00e7lar\u0131</p> <ul> <li>Erken tespit: Ofsayt \u00e7izgisi yanl\u0131\u015f pozisyonda \u2192 Hatal\u0131 karar</li> <li>Ge\u00e7 tespit: \u00c7izgi \u00e7ok ilerlemi\u015f \u2192 Hatal\u0131 karar</li> <li>Ka\u00e7\u0131r\u0131lm\u0131\u015f vuru\u015f: VAR karar\u0131 hi\u00e7 verilmez</li> </ul>"},{"location":"kick/kinematics/#fiziksel-model","title":"Fiziksel Model","text":"<p>Vuru\u015f an\u0131n\u0131 tespit etmek i\u00e7in Newton Kinemati\u011fi kullan\u0131l\u0131r:</p>"},{"location":"kick/kinematics/#konum-hz-ve-ivme","title":"Konum, H\u0131z ve \u0130vme","text":"<p>Topun pozisyonu \\(\\mathbf{p}(t)\\), h\u0131z\u0131 \\(\\mathbf{v}(t)\\) ve ivmesi \\(\\mathbf{a}(t)\\):</p> \\[ \\mathbf{v}(t) = \\mathbf{p}(t) - \\mathbf{p}(t-1) \\] \\[ \\mathbf{a}(t) = \\mathbf{v}(t) - \\mathbf{v}(t-1) = \\mathbf{p}(t) - 2\\mathbf{p}(t-1) + \\mathbf{p}(t-2) \\]"},{"location":"kick/kinematics/#vurus-fizigi","title":"Vuru\u015f Fizi\u011fi","text":"<p>Bir vuru\u015f an\u0131nda: 1. \u0130vme art\u0131\u015f\u0131: Top aniden h\u0131zlan\u0131r 2. Y\u00f6n de\u011fi\u015fimi: Hareket vekt\u00f6r\u00fc de\u011fi\u015fir</p> <pre><code>Vuru\u015f \u00d6ncesi        Vuru\u015f An\u0131           Vuru\u015f Sonras\u0131\n     \u25cb                  \u25cb                    \u25cb\n     \u2193                 \u2571 \u2190 \u0394v b\u00fcy\u00fck          \u2197\n     \u25cb                \u25cb                    \u25cb\n     \u2193                                      \n     \u25cb (yava\u015f)        (h\u0131zl\u0131)           (\u00e7ok h\u0131zl\u0131)\n</code></pre>"},{"location":"kick/kinematics/#ivme-vektoru-analizi","title":"\u0130vme Vekt\u00f6r\u00fc Analizi","text":""},{"location":"kick/kinematics/#hesaplama","title":"Hesaplama","text":"<pre><code>def calculate_acceleration(ball_history):\n    \"\"\"\n    Son 3 frame'deki pozisyonlardan ivme hesaplar.\n\n    Args:\n        ball_history: [(x1,y1), (x2,y2), (x3,y3)]\n\n    Returns:\n        float: \u0130vme b\u00fcy\u00fckl\u00fc\u011f\u00fc (m/frame\u00b2)\n    \"\"\"\n    p1, p2, p3 = ball_history[-3:]\n\n    # \u0130vme vekt\u00f6r\u00fc: a = p3 - 2*p2 + p1\n    accel_vector = np.array(p3) - 2*np.array(p2) + np.array(p1)\n\n    # \u0130vme b\u00fcy\u00fckl\u00fc\u011f\u00fc (magnitude)\n    accel_magnitude = np.linalg.norm(accel_vector)\n\n    return accel_magnitude\n</code></pre>"},{"location":"kick/kinematics/#formul","title":"Form\u00fcl","text":"\\[ \\|\\mathbf{a}\\| = \\|\\mathbf{p}(t) - 2\\mathbf{p}(t-1) + \\mathbf{p}(t-2)\\| \\]"},{"location":"kick/kinematics/#threshold-belirleme","title":"Threshold Belirleme","text":"<pre><code>ACCEL_THRESHOLD = 1.5  # m/frame\u00b2\n</code></pre> Hareket \u0130vme (m/frame\u00b2) Dura\u011fan top 0 - 0.3 Yava\u015f yuvarlanma 0.3 - 0.8 Pas 0.8 - 1.5 \u015eut/Pas 1.5+ \u2190 Threshold Sert \u015fut 2.5+"},{"location":"kick/kinematics/#yon-degisimi-analizi","title":"Y\u00f6n De\u011fi\u015fimi Analizi","text":""},{"location":"kick/kinematics/#neden-sadece-ivme-yetmez","title":"Neden Sadece \u0130vme Yetmez?","text":"<p>Baz\u0131 vuru\u015flar d\u00fc\u015f\u00fck ivmeli olabilir (yumu\u015fak pas). Bu durumda y\u00f6n de\u011fi\u015fimi daha g\u00fcvenilir bir sinyal olur.</p>"},{"location":"kick/kinematics/#dot-product-ile-yon-benzerligi","title":"Dot Product ile Y\u00f6n Benzerli\u011fi","text":"\\[ \\cos\\theta = \\frac{\\mathbf{v}_1 \\cdot \\mathbf{v}_2}{\\|\\mathbf{v}_1\\| \\|\\mathbf{v}_2\\|} \\] \\(\\cos\\theta\\) Anlam 1.0 Ayn\u0131 y\u00f6n (d\u00fcz hareket) 0.0 Dik a\u00e7\u0131 (90\u00b0 d\u00f6n\u00fc\u015f) -1.0 Ters y\u00f6n (180\u00b0 d\u00f6n\u00fc\u015f) <pre><code>def calculate_direction_change(ball_history):\n    \"\"\"Y\u00f6n de\u011fi\u015fimini hesaplar (dot product).\"\"\"\n    p1, p2, p3 = ball_history[-3:]\n\n    # H\u0131z vekt\u00f6rleri\n    v1 = np.array([p2[0]-p1[0], p2[1]-p1[1]])\n    v2 = np.array([p3[0]-p2[0], p3[1]-p2[1]])\n\n    # Normalize et\n    v1_unit = v1 / (np.linalg.norm(v1) + 1e-6)\n    v2_unit = v2 / (np.linalg.norm(v2) + 1e-6)\n\n    # Dot product: 1=ayn\u0131 y\u00f6n, 0=dik, -1=ters y\u00f6n\n    direction_similarity = np.dot(v1_unit, v2_unit)\n\n    return direction_similarity\n</code></pre>"},{"location":"kick/kinematics/#threshold","title":"Threshold","text":"<pre><code>DIR_CHANGE_THRESHOLD = 0.3  # cos(\u03b8) &lt; 0.3 \u2192 ~73\u00b0 \u00fczeri d\u00f6n\u00fc\u015f\n</code></pre>"},{"location":"kick/kinematics/#proximity-constraint","title":"Proximity Constraint","text":""},{"location":"kick/kinematics/#fiziksel-kural","title":"Fiziksel Kural","text":"<p>Bir vuru\u015f i\u00e7in topun bir oyuncunun yak\u0131n\u0131nda olmas\u0131 gerekir:</p> \\[ d_{\\min} = \\min_{p \\in \\text{Players}} \\|\\mathbf{ball} - \\mathbf{p}\\| \\] <pre><code>def calculate_min_distance(ball_coord, players):\n    \"\"\"Top ile en yak\u0131n oyuncu aras\u0131ndaki mesafe.\"\"\"\n    distances = [\n        np.linalg.norm(ball_coord - p['coord']) \n        for p in players\n    ]\n    return min(distances) if distances else float('inf')\n</code></pre>"},{"location":"kick/kinematics/#threshold_1","title":"Threshold","text":"<pre><code>DIST_THRESHOLD = 1.8  # metre\n</code></pre> Mesafe Anlam &lt; 1.0m Top ayakta veya kontrolde 1.0-1.8m Vuru\u015f menzilinde &gt; 1.8m Oyuncudan uzak (vuru\u015f olamaz)"},{"location":"kick/kinematics/#karar-mantg","title":"Karar Mant\u0131\u011f\u0131","text":""},{"location":"kick/kinematics/#kombine-kriterler","title":"Kombine Kriterler","text":"<p>Vuru\u015f tespiti i\u00e7in iki ko\u015ful birden sa\u011flanmal\u0131:</p> \\[ \\text{Kick} = \\underbrace{(\\|\\mathbf{a}\\| &gt; 1.5 \\lor \\cos\\theta &lt; 0.3)}_{\\text{Fiziksel Sinyal}} \\land \\underbrace{(d_{\\min} &lt; 1.8)}_{\\text{Yak\u0131nl\u0131k}} \\] <pre><code>def analyze(self, frame_idx, ball_coord, players) -&gt; bool:\n    # ... \u00f6nceki kontroller ...\n\n    # Fiziksel sinyaller\n    is_physically_kick = (accel &gt; self.accel_threshold or \n                          dir_change &lt; 0.3)\n\n    # Yak\u0131nl\u0131k kontrol\u00fc\n    is_near_enough = min_dist &lt; self.dist_threshold\n\n    # Final karar\n    if is_physically_kick and is_near_enough:\n        self.last_kick_frame = frame_idx\n        return True\n\n    return False\n</code></pre>"},{"location":"kick/kinematics/#neden-or-ve-and","title":"Neden OR (\u2228) ve AND (\u2227)?","text":"<ul> <li>Fiziksel sinyal (OR): Yumu\u015fak pas d\u00fc\u015f\u00fck ivmeli ama y\u00f6n de\u011fi\u015ftirir</li> <li>Yak\u0131nl\u0131k (AND): Topa dokunulmadan ivme art\u0131\u015f\u0131 olamaz (teknik hata hari\u00e7)</li> </ul>"},{"location":"kick/kinematics/#cooldown-mekanizmas","title":"Cooldown Mekanizmas\u0131","text":""},{"location":"kick/kinematics/#problem-coklu-tetikleme","title":"Problem: \u00c7oklu Tetikleme","text":"<p>Tek bir vuru\u015f, birden fazla frame'de threshold'u ge\u00e7ebilir:</p> <pre><code>Frame 100: accel=2.1 \u2192 KICK! \u2713\nFrame 101: accel=1.8 \u2192 KICK! \u2717 (ayn\u0131 vuru\u015f!)\nFrame 102: accel=1.6 \u2192 KICK! \u2717 (ayn\u0131 vuru\u015f!)\n</code></pre>"},{"location":"kick/kinematics/#cozum-cooldown","title":"\u00c7\u00f6z\u00fcm: Cooldown","text":"<pre><code>def __init__(self, fps=25.0):\n    self.cooldown_frames = int(fps * 0.8)  # 0.8 saniye\n    self.last_kick_frame = -100\n\ndef analyze(self, frame_idx, ball_coord, players):\n    # Cooldown kontrol\u00fc\n    if frame_idx - self.last_kick_frame &lt; self.cooldown_frames:\n        self.telemetry[\"status\"] = \"COOLDOWN\"\n        return False\n\n    # ... di\u011fer analizler ...\n\n    if is_kick:\n        self.last_kick_frame = frame_idx  # G\u00fcncelle\n        return True\n</code></pre>"},{"location":"kick/kinematics/#cooldown-suresi","title":"Cooldown S\u00fcresi","text":"<pre><code>0.8 saniye \u00d7 25 FPS = 20 frame\n</code></pre> <p>Bu s\u00fcre, ard\u0131\u015f\u0131k paslar i\u00e7in yeterince k\u0131sa, tekrarl\u0131 tetiklemeyi \u00f6nlemek i\u00e7in yeterince uzundur.</p>"},{"location":"kick/kinematics/#top-kayb-tolerans","title":"Top Kayb\u0131 Tolerans\u0131","text":""},{"location":"kick/kinematics/#problem-hzl-hareket-motion-blur","title":"Problem: H\u0131zl\u0131 Hareket = Motion Blur","text":"<p>H\u0131zl\u0131 hareket eden top, baz\u0131 frame'lerde tespit edilemeyebilir:</p> <pre><code>Frame 97: Ball at (34.2, 28.5) \u2713\nFrame 98: Ball NOT DETECTED \u2717\nFrame 99: Ball at (38.1, 25.2) \u2713\n</code></pre>"},{"location":"kick/kinematics/#cozum-toleransl-kayp","title":"\u00c7\u00f6z\u00fcm: Toleransl\u0131 Kay\u0131p","text":"<pre><code>def __init__(self):\n    self.lost_ball_counter = 0\n    self.max_lost_frames = 5  # 5 frame tolerans\n\ndef analyze(self, frame_idx, ball_coord, players):\n    if ball_coord is None:\n        self.lost_ball_counter += 1\n\n        if self.lost_ball_counter &gt; self.max_lost_frames:\n            # \u00c7ok uzun s\u00fcre kay\u0131p \u2192 history'yi s\u0131f\u0131rla\n            self.ball_history.clear()\n            return False\n        else:\n            # K\u0131sa s\u00fcreli kay\u0131p \u2192 tolere et\n            return False\n\n    # Top bulundu, sayac\u0131 s\u0131f\u0131rla\n    self.lost_ball_counter = 0\n</code></pre>"},{"location":"kick/kinematics/#telemetri-dashboard","title":"Telemetri Dashboard","text":""},{"location":"kick/kinematics/#durum-bilgileri","title":"Durum Bilgileri","text":"<pre><code>telemetry = {\n    \"accel\": 0.0,        # Anl\u0131k ivme\n    \"dir_change\": 0.0,   # Y\u00f6n benzerli\u011fi (-1 to 1)\n    \"min_dist\": 99.0,    # En yak\u0131n oyuncuya mesafe\n    \"status\": \"ARMED\",   # Durum string'i\n    \"reason\": \"\"         # Tetiklenmeme nedeni\n}\n</code></pre>"},{"location":"kick/kinematics/#durum-kodlar","title":"Durum Kodlar\u0131","text":"Status A\u00e7\u0131klama <code>SEARCHING</code> Top aran\u0131yor (ilk frame'ler) <code>BALL LOST</code> Top tespit edilemedi <code>BUFFERING</code> History dolduruluyor (&lt;3 frame) <code>COOLDOWN</code> Son vuru\u015ftan beri bekleme <code>ARMED</code> Sistem aktif, vuru\u015f bekleniyor <code>KICK!</code> Vuru\u015f alg\u0131land\u0131!"},{"location":"kick/kinematics/#debug-amacl","title":"Debug Ama\u00e7l\u0131","text":"<pre><code># Neden tetiklenmedi\u011fini anlamak i\u00e7in\nreasons = []\nif not is_physically_kick: \n    reasons.append(\"LOW_ACCEL\")\nif not is_near_enough: \n    reasons.append(\"TOO_FAR\")\n\nself.telemetry[\"reason\"] = \"|\".join(reasons)\n</code></pre>"},{"location":"kick/kinematics/#kod-implementasyonu","title":"Kod \u0130mplementasyonu","text":"<pre><code>class KickDetector:\n    def __init__(self, fps: float = 25.0):\n        self.ball_history = deque(maxlen=10)\n        self.dist_threshold = 1.8\n        self.accel_threshold = 1.5\n        self.last_kick_frame = -100\n        self.cooldown_frames = int(fps * 0.8)\n        self.lost_ball_counter = 0\n        self.max_lost_frames = 5\n\n        self.telemetry = {\n            \"accel\": 0.0, \"dir_change\": 0.0, \n            \"min_dist\": 99.0, \"status\": \"SEARCHING\", \"reason\": \"\"\n        }\n\n    def analyze(self, frame_idx, ball_coord, players) -&gt; bool:\n        # 1. Top kay\u0131p kontrol\u00fc\n        if ball_coord is None:\n            self.lost_ball_counter += 1\n            if self.lost_ball_counter &gt; self.max_lost_frames:\n                self.ball_history.clear()\n            return False\n        self.lost_ball_counter = 0\n\n        # 2. Cooldown kontrol\u00fc\n        if frame_idx - self.last_kick_frame &lt; self.cooldown_frames:\n            self.telemetry[\"status\"] = \"COOLDOWN\"\n            return False\n\n        # 3. History g\u00fcncelle\n        self.ball_history.append((ball_coord[0], ball_coord[1], frame_idx))\n        if len(self.ball_history) &lt; 3:\n            self.telemetry[\"status\"] = \"BUFFERING\"\n            return False\n\n        # 4. Kinematik hesaplamalar\n        p1, p2, p3 = list(self.ball_history)[-3:]\n        v1 = np.array([p2[0]-p1[0], p2[1]-p1[1]])\n        v2 = np.array([p3[0]-p2[0], p3[1]-p2[1]])\n\n        accel = np.linalg.norm(v2 - v1)\n        v1_u = v1 / (np.linalg.norm(v1) + 1e-6)\n        v2_u = v2 / (np.linalg.norm(v2) + 1e-6)\n        dir_change = np.dot(v1_u, v2_u)\n\n        # 5. Mesafe kontrol\u00fc\n        distances = [np.linalg.norm(ball_coord - p['coord']) for p in players]\n        min_dist = min(distances) if distances else 99.0\n\n        # 6. Telemetri g\u00fcncelle\n        self.telemetry.update({\n            \"accel\": accel, \"dir_change\": dir_change,\n            \"min_dist\": min_dist, \"status\": \"ARMED\"\n        })\n\n        # 7. Final karar\n        is_physically_kick = (accel &gt; self.accel_threshold or dir_change &lt; 0.3)\n        is_near_enough = min_dist &lt; self.dist_threshold\n\n        if is_physically_kick and is_near_enough:\n            self.last_kick_frame = frame_idx\n            self.telemetry[\"status\"] = \"KICK!\"\n            return True\n\n        return False\n</code></pre>"},{"location":"kick/kinematics/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>Temporal Filtering</li> <li>Ofsayt Kurallar\u0131</li> </ul>"},{"location":"kick/temporal/","title":"Temporal Filtering","text":""},{"location":"kick/temporal/#temporal-filtering","title":"Temporal Filtering","text":""},{"location":"kick/temporal/#gurultu-kaynaklar","title":"G\u00fcr\u00fclt\u00fc Kaynaklar\u0131","text":"<p>Real-time video analizinde bir\u00e7ok g\u00fcr\u00fclt\u00fc kayna\u011f\u0131 vard\u0131r:</p> Kaynak Etki Tespit hatas\u0131 Top/oyuncu yanl\u0131\u015f pozisyonda Tracking kayb\u0131 ID atlama veya kay\u0131p Motion blur H\u0131zl\u0131 harekette belirsizlik Okl\u00fczyon Nesneler birbirini kapat\u0131r Kamera hareketi Homografi de\u011fi\u015fimi <p>Bu g\u00fcr\u00fclt\u00fcler frame-to-frame tutars\u0131zl\u0131klara yol a\u00e7ar.</p>"},{"location":"kick/temporal/#exponential-moving-average-ema","title":"Exponential Moving Average (EMA)","text":""},{"location":"kick/temporal/#ofsayt-cizgisi-yumusatma","title":"Ofsayt \u00c7izgisi Yumu\u015fatma","text":"<p>Ham ofsayt \u00e7izgisi pozisyonu titrer. EMA ile yumu\u015fat\u0131l\u0131r:</p> \\[ \\hat{x}_t = \\alpha \\cdot x_t + (1-\\alpha) \\cdot \\hat{x}_{t-1} \\] <p>Burada: - \\(x_t\\): Raw pozisyon (frame t) - \\(\\hat{x}_t\\): Smoothed pozisyon - \\(\\alpha\\): Yumu\u015fatma fakt\u00f6r\u00fc (0-1)</p> <pre><code>class OffsideLogic:\n    def __init__(self):\n        self.alpha = 0.15  # Yava\u015f adaptasyon\n        self.smoothed_line_x = None\n        self.raw_line_x = None\n\n    def calculate_offside_line(self, players):\n        # ... raw_line_x hesapla ...\n\n        if self.smoothed_line_x is None:\n            self.smoothed_line_x = self.raw_line_x\n        else:\n            self.smoothed_line_x = (\n                self.alpha * self.raw_line_x + \n                (1 - self.alpha) * self.smoothed_line_x\n            )\n\n        return self.smoothed_line_x\n</code></pre>"},{"location":"kick/temporal/#alpha-degeri-secimi","title":"Alpha De\u011feri Se\u00e7imi","text":"Alpha Davran\u0131\u015f Kullan\u0131m 0.05 \u00c7ok yava\u015f adaptasyon Stabil sahne 0.15 Dengeli Genel kullan\u0131m 0.5 H\u0131zl\u0131 adaptasyon Dinamik sahne 1.0 Filtreleme yok Debug"},{"location":"kick/temporal/#gorsel-karslastrma","title":"G\u00f6rsel Kar\u015f\u0131la\u015ft\u0131rma","text":"<pre><code>Raw Signal:     \u2571\u2572\u2571\u2572\u2571\u2572\u2571\u2572\u2571\u2572\u2571\u2572    (Titrek)\n\nEMA (\u03b1=0.15):   \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500      (D\u00fcz)\n</code></pre>"},{"location":"kick/temporal/#lag-compensation","title":"Lag Compensation","text":""},{"location":"kick/temporal/#problem-ema-gecikme-yaratr","title":"Problem: EMA Gecikme Yarat\u0131r","text":"<p>EMA yumu\u015fatma, do\u011fal bir gecikme ekler:</p> <pre><code>Raw:        \u2500\u2500\u2500\u2500\u2500\u2500\u2571\u2500\u2500\u2500\u2500\u2500\u2500\n                 \u2191\n             De\u011fi\u015fim an\u0131 (t=0)\n\nSmoothed:   \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2571\u2500\u2500\n                     \u2191\n              Gecikmi\u015f tepki (t=2)\n</code></pre>"},{"location":"kick/temporal/#ofsayt-kararnda-gecikme-tehlikeli","title":"Ofsayt Karar\u0131nda Gecikme Tehlikeli","text":"<p>Vuru\u015f an\u0131nda raw pozisyon kullan\u0131lmal\u0131, \u00e7\u00fcnk\u00fc: - EMA \u00e7izgisi hen\u00fcz ger\u00e7ek pozisyona ula\u015fmam\u0131\u015f olabilir - Santimetre hassasiyetinde karar vermek gerekir</p>"},{"location":"kick/temporal/#cozum-dual-line-yaklasm","title":"\u00c7\u00f6z\u00fcm: Dual-Line Yakla\u015f\u0131m\u0131","text":"<pre><code>class OffsideLogic:\n    def calculate_offside_line(self, players):\n        # ...\n\n        # Raw: Karar i\u00e7in kullan\u0131l\u0131r\n        self.raw_line_x = defenders[1]\n\n        # Smoothed: Sadece g\u00f6rselle\u015ftirme i\u00e7in\n        self.smoothed_line_x = (\n            self.alpha * self.raw_line_x + \n            (1 - self.alpha) * self.smoothed_line_x\n        )\n\n        return self.smoothed_line_x  # UI i\u00e7in\n</code></pre> <pre><code># main.py - Karar an\u0131nda\nif is_kick:\n    decision_line = self.offside_logic.raw_line_x  # \u2190 Raw kullan!\n    result = self.final_logic.process_decision(\n        attackers, decision_line, direction\n    )\n</code></pre>"},{"location":"kick/temporal/#ball-history-buffer","title":"Ball History Buffer","text":""},{"location":"kick/temporal/#deque-yaps","title":"Deque Yap\u0131s\u0131","text":"<p>Son N frame'deki top pozisyonlar\u0131n\u0131 tutar:</p> <pre><code>from collections import deque\n\nball_history = deque(maxlen=10)\n\n# Her frame'de\nball_history.append((x, y, frame_idx))\n\n# Otomatik olarak eski veriler d\u00fc\u015fer\n# [f1, f2, f3, f4, f5, f6, f7, f8, f9, f10]\n#                                     \u2191 yeni\n# [f2, f3, f4, f5, f6, f7, f8, f9, f10, f11]\n#  \u2191 d\u00fc\u015fer                            \u2191 yeni\n</code></pre>"},{"location":"kick/temporal/#neden-10-frame","title":"Neden 10 Frame?","text":"Buffer Size Avantaj Dezavantaj 3 H\u0131zl\u0131 tepki G\u00fcr\u00fclt\u00fcye duyarl\u0131 10 Dengeli Genel kullan\u0131m 30 \u00c7ok stabil Eski veri etkisi <p>10 frame \u2248 0.4 saniye (25 FPS'te) \u2192 Yeterli ba\u011flam.</p>"},{"location":"kick/temporal/#possession-hysteresis","title":"Possession Hysteresis","text":""},{"location":"kick/temporal/#problem-sk-takm-degisimi","title":"Problem: S\u0131k Tak\u0131m De\u011fi\u015fimi","text":"<p>Topa en yak\u0131n oyuncu s\u00fcrekli de\u011fi\u015fiyorsa, atak tak\u0131m\u0131 da s\u00fcrekli de\u011fi\u015fir:</p> <pre><code>Frame 1: T0 closest \u2192 Attack: T0\nFrame 2: T1 closest \u2192 Attack: T1  \u2190 Gereksiz de\u011fi\u015fim\nFrame 3: T0 closest \u2192 Attack: T0  \u2190 Gereksiz de\u011fi\u015fim\n</code></pre>"},{"location":"kick/temporal/#cozum-hysteresis-threshold","title":"\u00c7\u00f6z\u00fcm: Hysteresis Threshold","text":"<pre><code>class OffsideLogic:\n    def __init__(self):\n        self.possession_history = deque(maxlen=50)  # 2 saniye\n        self.stability_threshold = 0.75  # %75 bask\u0131nl\u0131k\n\n    def update_attacking_team(self, players, ball_coord):\n        # ... en yak\u0131n tak\u0131m\u0131 bul ...\n\n        self.possession_history.append(closest_team)\n\n        counts = Counter(self.possession_history)\n        most_common, count = counts.most_common(1)[0]\n\n        # Hysteresis: %75 bask\u0131nl\u0131k olmadan de\u011fi\u015ftirme\n        ratio = count / len(self.possession_history)\n        if ratio &gt; self.stability_threshold:\n            self.attacking_team_id = most_common\n</code></pre>"},{"location":"kick/temporal/#gorsel","title":"G\u00f6rsel","text":"<pre><code>Possession History: [0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,...]\n                            \u2191       \u2191\n                         Noise   Noise\n\nT0 Count: 45/50 = 90% &gt; 75% \u2192 Attack = T0 (stabil)\n</code></pre>"},{"location":"kick/temporal/#team-prediction-voting","title":"Team Prediction Voting","text":""},{"location":"kick/temporal/#window-based-voting","title":"Window-Based Voting","text":"<pre><code>class TemporalTeamVoter:\n    def __init__(self):\n        self.window_size = 15\n        self.history = {}  # track_id \u2192 deque\n\n    def vote(self, track_id, prediction):\n        if track_id not in self.history:\n            self.history[track_id] = deque(maxlen=15)\n\n        self.history[track_id].append(prediction)\n\n        # Majority voting\n        counts = Counter(self.history[track_id])\n        return counts.most_common(1)[0][0]\n</code></pre>"},{"location":"kick/temporal/#stability-locking","title":"Stability Locking","text":"<p>15 frame boyunca 12+ ayn\u0131 tahmin \u2192 Kal\u0131c\u0131 kilit:</p> <pre><code>def vote(self, track_id, prediction):\n    # ... voting ...\n\n    most_common, count = counts.most_common(1)[0]\n\n    # Stability check\n    if (len(self.history[track_id]) == self.window_size and \n        count &gt;= 12):\n        self.stable_teams[track_id] = most_common\n        # Art\u0131k predict \u00e7a\u011fr\u0131lmaz, direkt d\u00f6ner\n</code></pre>"},{"location":"kick/temporal/#collision-based-unlock","title":"Collision-Based Unlock","text":""},{"location":"kick/temporal/#iou-caksma-tespiti","title":"IoU \u00c7ak\u0131\u015fma Tespiti","text":"<p>\u0130ki oyuncu \u00e7ak\u0131\u015ft\u0131\u011f\u0131nda tracking ID'leri kar\u0131\u015fabilir:</p> <pre><code>def detect_collisions(self, tids, boxes, threshold=0.20):\n    for i in range(len(tids)):\n        for j in range(i + 1, len(tids)):\n            b1, b2 = boxes[i], boxes[j]\n\n            # Intersection\n            x1 = max(b1[0], b2[0])\n            y1 = max(b1[1], b2[1])\n            x2 = min(b1[2], b2[2])\n            y2 = min(b1[3], b2[3])\n\n            if x2 &lt; x1 or y2 &lt; y1:\n                continue\n\n            inter_area = (x2 - x1) * (y2 - y1)\n            min_area = min(\n                (b1[2]-b1[0])*(b1[3]-b1[1]),\n                (b2[2]-b2[0])*(b2[3]-b2[1])\n            )\n\n            # IoU kontrol\u00fc\n            if inter_area / min_area &gt; threshold:\n                self.team_voter.unlock_id(tids[i])\n                self.team_voter.unlock_id(tids[j])\n</code></pre>"},{"location":"kick/temporal/#iou-formulu","title":"IoU Form\u00fcl\u00fc","text":"\\[ \\text{IoU} = \\frac{|A \\cap B|}{|A \\cup B|} = \\frac{\\text{Intersection Area}}{\\text{Union Area}} \\] <p>Basitle\u015ftirilmi\u015f versiyon (minimum area bazl\u0131):</p> \\[ \\text{Overlap Ratio} = \\frac{\\text{Intersection Area}}{\\min(|A|, |B|)} \\]"},{"location":"kick/temporal/#filtering-pipeline-ozeti","title":"Filtering Pipeline \u00d6zeti","text":"<pre><code>flowchart TD\n    subgraph Input[\"Raw Signals\"]\n        A[Player Detections]\n        B[Ball Position]\n        C[Team Predictions]\n    end\n\n    subgraph Filtering[\"Temporal Filters\"]\n        D[EMA Smoothing]\n        E[Ball History Buffer]\n        F[Possession Hysteresis]\n        G[Team Voting + Lock]\n        H[IoU Collision Check]\n    end\n\n    subgraph Output[\"Stable Outputs\"]\n        I[Smooth Offside Line]\n        J[Kick Detection]\n        K[Stable Attack Team]\n        L[Locked Team IDs]\n    end\n\n    A --&gt; G\n    A --&gt; H\n    B --&gt; D\n    B --&gt; E\n    C --&gt; F\n\n    D --&gt; I\n    E --&gt; J\n    F --&gt; K\n    G --&gt; L\n    H --&gt; G</code></pre>"},{"location":"kick/temporal/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>FIFA Ofsayt Kurallar\u0131</li> <li>Karar Algoritmas\u0131</li> </ul>"},{"location":"offside/algorithm/","title":"Ofsayt Karar Algoritmas\u0131","text":""},{"location":"offside/algorithm/#ofsayt-karar-algoritmas","title":"Ofsayt Karar Algoritmas\u0131","text":""},{"location":"offside/algorithm/#karar-pipeline","title":"Karar Pipeline'\u0131","text":"<pre><code>flowchart TD\n    subgraph Trigger[\"Tetikleme\"]\n        A[Vuru\u015f Alg\u0131land\u0131] --&gt; B{Ofsayt \u00c7izgisi&lt;br/&gt;Mevcut mu?}\n    end\n\n    subgraph Prep[\"Haz\u0131rl\u0131k\"]\n        B --&gt;|Evet| C[Raw Line X Al]\n        B --&gt;|Hay\u0131r| Z[Karar Yok]\n        C --&gt; D[H\u00fccumcular\u0131 Filtrele]\n        D --&gt; E[Atak Y\u00f6n\u00fcn\u00fc Al]\n    end\n\n    subgraph Analysis[\"Analiz\"]\n        E --&gt; F[En \u0130leri H\u00fccumcuyu Bul]\n        F --&gt; G{H\u00fccumcu X&lt;br/&gt;vs&lt;br/&gt;\u00c7izgi X}\n    end\n\n    subgraph Decision[\"Karar\"]\n        G --&gt;|L2R: X &gt; Line| H[OFFSIDE]\n        G --&gt;|R2L: X &lt; Line| H\n        G --&gt;|Di\u011fer| I[ONSIDE]\n    end\n\n    subgraph Output[\"\u00c7\u0131kt\u0131\"]\n        H --&gt; J[VAR Ekran\u0131 + Margin]\n        I --&gt; J\n    end</code></pre>"},{"location":"offside/algorithm/#finaldecisionlogic-snf","title":"FinalDecisionLogic S\u0131n\u0131f\u0131","text":""},{"location":"offside/algorithm/#kod-implementasyonu","title":"Kod \u0130mplementasyonu","text":"<pre><code>class FinalDecisionLogic:\n    def __init__(self):\n        self.last_result = {}\n\n    def process_decision(self, attackers: list, offside_line_x: float, direction: str) -&gt; dict:\n        \"\"\"\n        Ofsayt karar\u0131 verir.\n\n        Args:\n            attackers: H\u00fccum eden tak\u0131m\u0131n oyuncular\u0131\n            offside_line_x: Ofsayt \u00e7izgisi X koordinat\u0131 (metre)\n            direction: \"L2R\" veya \"R2L\"\n\n        Returns:\n            {\"is_offside\": bool, \"margin\": float}\n        \"\"\"\n        if not attackers or offside_line_x is None:\n            return None\n\n        # En ileri h\u00fccumcuyu bul\n        attackers.sort(\n            key=lambda p: p['coord'][0], \n            reverse=(direction == \"L2R\")\n        )\n        lead_attacker = attackers[0]\n\n        # Fark hesapla\n        diff = offside_line_x - lead_attacker['coord'][0]\n\n        # Karar ver\n        if direction == \"L2R\":\n            is_offside = lead_attacker['coord'][0] &gt; offside_line_x\n        else:  # R2L\n            is_offside = lead_attacker['coord'][0] &lt; offside_line_x\n\n        # Sonucu kaydet\n        self.last_result = {\n            \"is_offside\": is_offside,\n            \"margin\": abs(diff)\n        }\n\n        return self.last_result\n</code></pre>"},{"location":"offside/algorithm/#atak-yonu-belirleme","title":"Atak Y\u00f6n\u00fc Belirleme","text":""},{"location":"offside/algorithm/#takm-centroid-yontemi","title":"Tak\u0131m Centroid Y\u00f6ntemi","text":"<pre><code>def update_attack_direction(self, players):\n    # Her tak\u0131m\u0131n X ortalamas\u0131\n    t0_x = [p['coord'][0] for p in players if p['team'] == 0]\n    t1_x = [p['coord'][0] for p in players if p['team'] == 1]\n\n    if len(t0_x) &lt; 3 or len(t1_x) &lt; 3:\n        return  # Yeterli veri yok\n\n    centroid_0 = np.mean(t0_x)\n    centroid_1 = np.mean(t1_x)\n\n    # H\u00fccum eden tak\u0131m\u0131n centroid'i daha ileride\n    if self.attacking_team_id == 0:\n        self.attack_direction = \"L2R\" if centroid_0 &lt; centroid_1 else \"R2L\"\n    else:\n        self.attack_direction = \"L2R\" if centroid_1 &lt; centroid_0 else \"R2L\"\n</code></pre>"},{"location":"offside/algorithm/#gorsel","title":"G\u00f6rsel","text":"<pre><code>Team 0 Centroid: X = 35        Team 1 Centroid: X = 70\n        \u25cb                              \u25cb\n       \u25cb\u25cb\u25cb                            \u25cb\u25cb\u25cb\n        \u25cb                              \u25cb\n\nAttack Team = 0 \u2192 L2R (Sola do\u011fru giden tak\u0131m h\u00fccumda)\n</code></pre>"},{"location":"offside/algorithm/#margin-fark-hesaplama","title":"Margin (Fark) Hesaplama","text":""},{"location":"offside/algorithm/#formul","title":"Form\u00fcl","text":"\\[ \\text{margin} = |x_{\\text{offside\\_line}} - x_{\\text{attacker}}| \\]"},{"location":"offside/algorithm/#anlam","title":"Anlam\u0131","text":"Margin Anlam &lt; 0.1m \u00c7ok yak\u0131n karar (VAR kritik) 0.1-0.5m Normal ofsayt &gt; 0.5m A\u00e7\u0131k ofsayt"},{"location":"offside/algorithm/#gorsellestirme","title":"G\u00f6rselle\u015ftirme","text":"<pre><code>def render_var_decision(self, frame, result, line_x):\n    color = (0, 0, 255) if result['is_offside'] else (0, 255, 0)\n\n    # Karar banner'\u0131\n    cv2.rectangle(frame, (0, 0), (self.width, 150), (0, 0, 0), -1)\n\n    text = f\"VAR DECISION: {'OFFSIDE' if result['is_offside'] else 'ONSIDE'}\"\n    cv2.putText(frame, text, (50, 70), 0, 1.5, color, 4)\n\n    # Margin g\u00f6ster\n    margin_text = f\"Margin: {result['margin']:.2f}m\"\n    cv2.putText(frame, margin_text, (50, 120), 0, 1.0, (255, 255, 255), 2)\n\n    # Ofsayt \u00e7izgisi\n    pts = self.geometry.get_offside_line(line_x)\n    if len(pts) == 2:\n        cv2.line(frame, pts[0], pts[1], color, 6)\n</code></pre>"},{"location":"offside/algorithm/#sralama-ve-en-ileri-hucumcu","title":"S\u0131ralama ve En \u0130leri H\u00fccumcu","text":""},{"location":"offside/algorithm/#l2r-atak-soldan-saga","title":"L2R Atak (Soldan Sa\u011fa)","text":"<pre><code># En b\u00fcy\u00fck X = en ilerideki h\u00fccumcu\nattackers.sort(key=lambda p: p['coord'][0], reverse=True)\nlead = attackers[0]\n</code></pre> <pre><code>H\u00fccumcular X: [65, 58, 52]\nS\u0131ral\u0131 (desc): [65, 58, 52]\n                \u2191\n           En ileri (X=65)\n\nOfsayt \u00c7izgisi: X=62\n\n65 &gt; 62 \u2192 OFFSIDE\n</code></pre>"},{"location":"offside/algorithm/#r2l-atak-sagdan-sola","title":"R2L Atak (Sa\u011fdan Sola)","text":"<pre><code># En k\u00fc\u00e7\u00fck X = en ilerideki h\u00fccumcu\nattackers.sort(key=lambda p: p['coord'][0])\nlead = attackers[0]\n</code></pre> <pre><code>H\u00fccumcular X: [45, 52, 58]\nS\u0131ral\u0131 (asc): [45, 52, 58]\n               \u2191\n          En ileri (X=45)\n\nOfsayt \u00c7izgisi: X=48\n\n45 &lt; 48 \u2192 OFFSIDE\n</code></pre>"},{"location":"offside/algorithm/#freeze-frame-mekanizmas","title":"Freeze Frame Mekanizmas\u0131","text":""},{"location":"offside/algorithm/#neden-freeze","title":"Neden Freeze?","text":"<p>VAR karar\u0131 g\u00f6rsel olarak do\u011frulanabilir olmal\u0131. Karar an\u0131nda frame dondurulur.</p> <pre><code>class AutonomousVAR:\n    def run(self):\n        # ...\n\n        if is_kick and smooth_line:\n            # Karar\u0131 al\n            decision_line = self.offside_logic.raw_line_x\n            result = self.final_logic.process_decision(...)\n\n            # Frame'i dondur\n            self.freeze_frame = frame.copy()\n            self.render_var_decision(self.freeze_frame, result, decision_line)\n\n            # 3 saniye g\u00f6ster (25 FPS \u00d7 3)\n            self.freeze_frames_left = int(self.fps * 3)\n\n        # Freeze aktifse\n        if self.freeze_frames_left &gt; 0:\n            self.freeze_frames_left -= 1\n            self.writer.write(self.freeze_frame)\n            continue  # Normal i\u015flemeyi atla\n</code></pre>"},{"location":"offside/algorithm/#freeze-suresi","title":"Freeze S\u00fcresi","text":"<pre><code>freeze_duration = 3.0  # saniye\nfreeze_frames = int(fps * freeze_duration)  # 75 frame (25 FPS'te)\n</code></pre>"},{"location":"offside/algorithm/#karar-dogrulama-matrisi","title":"Karar Do\u011frulama Matrisi","text":""},{"location":"offside/algorithm/#karar-tablosu","title":"Karar Tablosu","text":"Durum Attack Dir Attacker X Line X Karar Ofsayt L2R 65 62 \u2717 OFFSIDE Onside L2R 60 62 \u2713 ONSIDE Ofsayt R2L 45 48 \u2717 OFFSIDE Onside R2L 50 48 \u2713 ONSIDE S\u0131n\u0131rda L2R 62.1 62.0 \u2717 OFFSIDE (0.1m)"},{"location":"offside/algorithm/#boolean-mantg","title":"Boolean Mant\u0131\u011f\u0131","text":"<pre><code># L2R: H\u00fccumcu sa\u011fda (b\u00fcy\u00fck X) \u2192 ofsayt\nis_offside_l2r = attacker_x &gt; line_x\n\n# R2L: H\u00fccumcu solda (k\u00fc\u00e7\u00fck X) \u2192 ofsayt\nis_offside_r2l = attacker_x &lt; line_x\n</code></pre>"},{"location":"offside/algorithm/#edge-case-handling","title":"Edge Case Handling","text":""},{"location":"offside/algorithm/#1-hucumcu-listesi-bos","title":"1. H\u00fccumcu Listesi Bo\u015f","text":"<pre><code>if not attackers:\n    return None\n</code></pre>"},{"location":"offside/algorithm/#2-ofsayt-cizgisi-yok","title":"2. Ofsayt \u00c7izgisi Yok","text":"<pre><code>if offside_line_x is None:\n    return None\n</code></pre>"},{"location":"offside/algorithm/#3-tum-hucumcular-kendi-yarsnda","title":"3. T\u00fcm H\u00fccumcular Kendi Yar\u0131s\u0131nda","text":"<pre><code># Orta saha: X = 52.5\n# T\u00fcm h\u00fccumcular X &lt; 52.5 \u2192 Ofsayt kontrol\u00fc gereksiz\n</code></pre> <p>Bu durum \u015fu anki implementasyonda handle edilmiyor (iyile\u015ftirme f\u0131rsat\u0131).</p>"},{"location":"offside/algorithm/#telemetri-dashboard-entegrasyonu","title":"Telemetri Dashboard Entegrasyonu","text":"<pre><code>def render_telemetry_dashboard(self, frame, line_x):\n    logic = self.offside_logic\n\n    info = [\n        (f\"FRAME: {self.frame_idx}\", (255, 255, 255)),\n        (f\"ATTACK TEAM: T{logic.attacking_team_id}\", (0, 255, 255)),\n        (f\"DIRECTION: {logic.attack_direction}\", (0, 255, 255)),\n        (f\"OFFSIDE LINE: {line_x:.2f}m\" if line_x else \"N/A\", (0, 255, 0)),\n        (\"-\" * 20, (100, 100, 100)),\n        (f\"KICK STATUS: {self.kick_detector.telemetry['status']}\", (255, 0, 255)),\n        (f\"ACCEL: {self.kick_detector.telemetry['accel']:.2f}\", (255, 255, 255)),\n        (f\"MIN_DIST: {self.kick_detector.telemetry['min_dist']:.2f}m\", (255, 255, 255))\n    ]\n\n    # Dashboard \u00e7iz...\n</code></pre>"},{"location":"offside/algorithm/#performans-metrikleri","title":"Performans Metrikleri","text":"Metrik De\u011fer Karar S\u00fcresi ~2ms False Positive Rate ~8% False Negative Rate ~4% Margin Accuracy \u00b10.15m"},{"location":"offside/algorithm/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>Sonu\u00e7lar ve Demo</li> </ul>"},{"location":"offside/rules/","title":"FIFA Ofsayt Kurallar\u0131","text":""},{"location":"offside/rules/#fifa-ofsayt-kurallar","title":"FIFA Ofsayt Kurallar\u0131","text":""},{"location":"offside/rules/#resmi-tanm","title":"Resmi Tan\u0131m","text":"<p>FIFA Laws of the Game - Law 11</p> <p>Bir oyuncu, topun ve sondan ikinci rakibin daha gerisinde oldu\u011funda ofsayt pozisyonundad\u0131r.</p> <p>Ofsayt pozisyonunda olmak tek ba\u015f\u0131na su\u00e7 de\u011fildir. Oyuncu ancak topun oynanma an\u0131nda ofsayt pozisyonundaysa ve aktif olarak oyuna kat\u0131l\u0131rsa ofsaytt\u0131r.</p>"},{"location":"offside/rules/#kritik-kavramlar","title":"Kritik Kavramlar","text":""},{"location":"offside/rules/#1-ofsayt-pozisyonu","title":"1. Ofsayt Pozisyonu","text":"<p>Bir oyuncu \u015fu durumlarda ofsayt pozisyonundad\u0131r:</p> <ul> <li>Rakip yar\u0131 sahada</li> <li>Toptan daha ileride (kale \u00e7izgisine yak\u0131n)</li> <li>Sondan ikinci rakipten daha ileride</li> </ul> <pre><code>         Kale \u00c7izgisi\n              \u2502\n    Kaleci \u2192 \u25cb\u2502\n              \u2502\n Savunmac\u0131 \u2192 \u25cb\u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Ofsayt \u00c7izgisi\n              \u2502\n              \u2502     \u25cb \u2190 H\u00fccumcu (OFFSIDE!)\n              \u2502\n              \u2502        \u25cb \u2190 Top\n              \u2502\n              \u2502\n    \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Orta Saha\n</code></pre>"},{"location":"offside/rules/#2-sondan-ikinci-rakip","title":"2. \"Sondan \u0130kinci Rakip\"","text":"<p>Genellikle: - Kaleci = Son rakip - Son savunmac\u0131 = Sondan ikinci rakip</p> <p>Kaleci \u0130stisnas\u0131</p> <p>Kaleci, savunmac\u0131lardan daha ilerideyse (\u00f6rn: h\u00fccuma \u00e7\u0131km\u0131\u015f), ofsayt \u00e7izgisi iki savunmac\u0131ya g\u00f6re belirlenir.</p>"},{"location":"offside/rules/#3-topun-oynanma-an","title":"3. \"Topun Oynanma An\u0131\"","text":"<p>Ofsayt, pas verildi\u011fi an de\u011ferlendirilir: - Pas alan oyuncunun pozisyonu - O andaki ofsayt \u00e7izgisi</p> <pre><code>t=0 (Pas an\u0131)        t=0.5s (Top ula\u015ft\u0131\u011f\u0131nda)\n    \u2502                      \u2502\n\u25cb \u2190 Oyuncu (OFFSIDE)      \u25cb\u2502 \u2190 Art\u0131k \u00e7izginin gerisinde\n    \u2502                      \u2502\n\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500 Offside Line      \u2502\n    \u2502                      \u2502\n   \u26bd \u2190 Top               \u26bd \u2190 Top burada\n</code></pre>"},{"location":"offside/rules/#ofsayt-saylmayan-durumlar","title":"Ofsayt Say\u0131lmayan Durumlar","text":""},{"location":"offside/rules/#1-kendi-yar-sahasnda","title":"1. Kendi Yar\u0131 Sahas\u0131nda","text":"<pre><code>    \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Orta Saha\n              \u2502\n    H\u00fccumcu \u2192 \u25cb (Kendi yar\u0131s\u0131nda = OFFSIDE YOK)\n              \u2502\n</code></pre>"},{"location":"offside/rules/#2-top-ve-sondan-ikinci-rakiple-ayn-hizada","title":"2. Top ve Sondan \u0130kinci Rakiple Ayn\u0131 Hizada","text":"<pre><code>Savunmac\u0131 \u2192 \u25cb\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Ofsayt \u00c7izgisi\n            \u2502\nH\u00fccumcu \u2192  \u25cb (Ayn\u0131 hizda = OFFSIDE YOK)\n            \u2502\n</code></pre>"},{"location":"offside/rules/#3-tac-korner-aut","title":"3. Ta\u00e7, Korner, Aut","text":"<p>Bu durumlarda ofsayt kural\u0131 uygulanmaz.</p>"},{"location":"offside/rules/#vucut-parcalar","title":"V\u00fccut Par\u00e7alar\u0131","text":"<p>Hangi V\u00fccut Par\u00e7alar\u0131 Say\u0131l\u0131r?</p> <p>Sadece gol at\u0131labilecek v\u00fccut par\u00e7alar\u0131:</p> <ul> <li>Kafa</li> <li>G\u00f6vde</li> <li>Bacaklar</li> </ul> <p>Say\u0131lmayan: Kollar, eller</p>"},{"location":"offside/rules/#pratik-uygulama","title":"Pratik Uygulama","text":"<pre><code>       \u250c\u2500\u2510 Kafa\n       \u251c\u2500\u2524\n      \u250c\u2534\u2500\u2534\u2510 \n      \u2502   \u2502 G\u00f6vde \u2190 Bu noktalar de\u011ferlendirilir\n      \u2514\u252c\u2500\u252c\u2518\n       \u2502 \u2502 Bacaklar \u2190 Bu noktalar de\u011ferlendirilir\n       \u2502 \u2502\n      \u2500\u2534\u2500\u2534\u2500\n</code></pre> <p>Sistemde ayak pozisyonu (bounding box alt kenar\u0131) kullan\u0131l\u0131r.</p>"},{"location":"offside/rules/#bu-sistemin-yaklasm","title":"Bu Sistemin Yakla\u015f\u0131m\u0131","text":""},{"location":"offside/rules/#basitlestirmeler","title":"Basitle\u015ftirmeler","text":"FIFA Kural\u0131 Sistem \u0130mplementasyonu T\u00fcm v\u00fccut par\u00e7alar\u0131 Sadece ayak pozisyonu Aktif kat\u0131l\u0131m analizi T\u00fcm h\u00fccumcular de\u011ferlendirilir Ta\u00e7/korner istisnas\u0131 Uygulanm\u0131yor (manuel kontrol)"},{"location":"offside/rules/#avantajlar","title":"Avantajlar","text":"<ol> <li>Hesaplama basitli\u011fi: Tek nokta kar\u015f\u0131la\u015ft\u0131rmas\u0131</li> <li>Tutarl\u0131l\u0131k: Her durumda ayn\u0131 metot</li> <li>G\u00f6rselle\u015ftirme kolayl\u0131\u011f\u0131: Tek \u00e7izgi</li> </ol>"},{"location":"offside/rules/#dezavantajlar","title":"Dezavantajlar","text":"<ol> <li>G\u00f6vde ofsaytta, ayak \u00e7izgide \u2192 Ka\u00e7\u0131r\u0131l\u0131r</li> <li>Ta\u00e7 at\u0131\u015f\u0131nda ofsayt verebilir (yanl\u0131\u015f pozitif)</li> </ol>"},{"location":"offside/rules/#saha-koordinat-sistemi","title":"Saha Koordinat Sistemi","text":""},{"location":"offside/rules/#x-ekseni-ofsayt-ekseni","title":"X Ekseni = Ofsayt Ekseni","text":"<p>FIFA sahas\u0131nda X koordinat\u0131 ofsayt belirler:</p> <pre><code>X = 0                                    X = 105\n   \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n   \u2502                                        \u2502\n  Kale                                    Kale\n(Sol)                                   (Sa\u011f)\n</code></pre>"},{"location":"offside/rules/#atak-yonune-gore-ofsayt","title":"Atak Y\u00f6n\u00fcne G\u00f6re Ofsayt","text":"<p>L2R (Soldan Sa\u011fa Atak): </p><pre><code>H\u00fccumcu X &gt; Ofsayt \u00c7izgisi X \u2192 OFFSIDE\n</code></pre><p></p> <p>R2L (Sa\u011fdan Sola Atak): </p><pre><code>H\u00fccumcu X &lt; Ofsayt \u00c7izgisi X \u2192 OFFSIDE\n</code></pre><p></p>"},{"location":"offside/rules/#ofsayt-cizgisi-hesaplama","title":"Ofsayt \u00c7izgisi Hesaplama","text":""},{"location":"offside/rules/#admlar","title":"Ad\u0131mlar","text":"<ol> <li>Savunmac\u0131lar\u0131 filtrele: H\u00fccum eden tak\u0131m olmayan oyuncular</li> <li>X koordinat\u0131na g\u00f6re s\u0131rala: Atak y\u00f6n\u00fcne ba\u011fl\u0131</li> <li>\u0130kinci oyuncuyu al: Ofsayt \u00e7izgisi</li> </ol> <pre><code>def calculate_offside_line(self, players):\n    # Savunmac\u0131lar\u0131 filtrele\n    defenders = [\n        p['coord'][0] for p in players \n        if p['team'] != self.attacking_team_id\n    ]\n\n    if len(defenders) &lt; 2:\n        return None\n\n    # Atak y\u00f6n\u00fcne g\u00f6re s\u0131rala\n    if self.attack_direction == \"L2R\":\n        defenders.sort(reverse=True)  # B\u00fcy\u00fckten k\u00fc\u00e7\u00fc\u011fe\n    else:\n        defenders.sort()  # K\u00fc\u00e7\u00fckten b\u00fcy\u00fc\u011fe\n\n    # \u0130kinci savunmac\u0131 = ofsayt \u00e7izgisi\n    offside_line_x = defenders[1]\n\n    return offside_line_x\n</code></pre>"},{"location":"offside/rules/#ornek-l2r-atak","title":"\u00d6rnek: L2R Atak","text":"<pre><code>Savunmac\u0131lar X: [85, 72, 68, 45]\nS\u0131ral\u0131 (desc): [85, 72, 68, 45]\n                 \u2191   \u2191\n              Kaleci  Ofsayt \u00c7izgisi (X=72)\n</code></pre>"},{"location":"offside/rules/#edge-cases","title":"Edge Cases","text":""},{"location":"offside/rules/#1-yetersiz-savunmac","title":"1. Yetersiz Savunmac\u0131","text":"<pre><code>if len(defenders) &lt; 2:\n    return None  # Karar verilemez\n</code></pre>"},{"location":"offside/rules/#2-kaleci-hucumda","title":"2. Kaleci H\u00fccumda","text":"<p>Kaleci top kontrol\u00fcnde veya ileride \u2192 Ofsayt \u00e7izgisi 2 saha oyuncusuna g\u00f6re:</p> <pre><code>Kaleci X = 60 (h\u00fccumda)\nSavunmac\u0131lar: [55, 50, 45]\nS\u0131ral\u0131: [55, 50, 45]\n         \u2191   \u2191\n      1st  2nd \u2192 Ofsayt \u00c7izgisi = 50\n</code></pre>"},{"location":"offside/rules/#3-hucumcu-kendi-yarsnda","title":"3. H\u00fccumcu Kendi Yar\u0131s\u0131nda","text":"<p>X &lt; 52.5 (orta saha) \u2192 Ofsayt de\u011ferlendirmesi yap\u0131lmaz.</p>"},{"location":"offside/rules/#sonraki-bolumler","title":"Sonraki B\u00f6l\u00fcmler","text":"<ul> <li>Karar Algoritmas\u0131 - Implementasyon detaylar\u0131</li> <li>Sonu\u00e7lar - Test ve performans</li> </ul>"}]}